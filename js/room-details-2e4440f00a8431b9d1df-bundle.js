(()=>{"use strict";var __webpack_modules__={566:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{eval("\n// EXTERNAL MODULE: ../node_modules/jquery-ui/ui/widget.js\nvar widget = __webpack_require__(803);\n// EXTERNAL MODULE: ../node_modules/autobind-decorator/lib/esm/index.js\nvar esm = __webpack_require__(362);\n;// CONCATENATED MODULE: ./components/menu/Menu.js\n/* provided dependency */ var $ = __webpack_require__(638);\nvar _class;\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\n\nlet Menu = (_class = class Menu {\n  constructor() {\n    this.setDefaultClassName();\n    this.findMenuItem();\n  }\n\n  setDefaultClassName() {\n    this.toggleClass = 'menu__burger_active';\n    this.menuItemListClass = '.js-menu__item_with-list';\n    this.itemsClass = '.js-menu__items';\n    this.burgerClass = '.js-menu__burger';\n    this.closeClass = '.js-menu__close';\n    this.dropListClass = '.js-menu__drop-list';\n  }\n\n  findMenuItem() {\n    this.$burger = $(this.burgerClass);\n    this.$menu = $(this.itemsClass);\n    this.$closeButton = $(this.closeClass);\n  }\n\n  init() {\n    this.$burger.on('click', this.handleToggleMenuBurgerClick);\n    this.$closeButton.on('click', this.handlerHideBurgerMenuClick);\n    $(document).on('click', this.handlerDocumentClick);\n    $(this.menuItemListClass).hover(this.handlerIn, this.handlerOut);\n  }\n\n  handlerDocumentClick(event) {\n    if ($(event.target).closest(this.itemsClass).length || $(event.target).closest(this.burgerClass).length) {\n      return;\n    }\n\n    this.handlerHideBurgerMenuClick();\n  }\n\n  handlerHideBurgerMenuClick() {\n    this.$menu.removeClass(this.toggleClass);\n  }\n\n  handlerIn(event) {\n    $(this.dropListClass, event.currentTarget).stop().slideDown(200);\n  }\n\n  handlerOut(event) {\n    $(this.dropListClass, event.currentTarget).stop().slideUp(200);\n  }\n\n  handleToggleMenuBurgerClick(event) {\n    $(event.currentTarget).siblings(this.itemsClass).toggleClass(this.toggleClass);\n  }\n\n}, (_applyDecoratedDescriptor(_class.prototype, \"handlerDocumentClick\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(_class.prototype, \"handlerDocumentClick\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"handlerHideBurgerMenuClick\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(_class.prototype, \"handlerHideBurgerMenuClick\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"handlerIn\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(_class.prototype, \"handlerIn\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"handlerOut\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(_class.prototype, \"handlerOut\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"handleToggleMenuBurgerClick\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(_class.prototype, \"handleToggleMenuBurgerClick\"), _class.prototype)), _class);\n/* harmony default export */ const menu_Menu = (Menu);\n;// CONCATENATED MODULE: ./components/menu/index.js\n/* provided dependency */ var menu_$ = __webpack_require__(638);\n\nmenu_$(() => {\n  const menu = new menu_Menu();\n  menu.init();\n});\n;// CONCATENATED MODULE: ./components/header/index.js\n\n;// CONCATENATED MODULE: ./components/diagram/Diagram.js\n/* provided dependency */ var Diagram_$ = __webpack_require__(638);\nvar Diagram_class;\n\nfunction Diagram_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\n\nlet Diagram = (Diagram_class = class Diagram {\n  constructor() {\n    this.setDefaultClassName();\n    this.findDiagramElements();\n  }\n\n  setDefaultClassName() {\n    this.hoverClass = 'diagram__hovered';\n    this.hideNumberClass = 'diagram__chart-number_hidden';\n  }\n\n  findDiagramElements() {\n    this.$legendEl = Diagram_$('.js-legend-el');\n    this.$votes = Diagram_$('.js-votes');\n    this.$unitsList = Diagram_$('.js-unit');\n    this.$numberList = Diagram_$('.js-number');\n  }\n\n  init() {\n    this.$legendEl.each(this.diagramMove);\n    this.$unitsList.each(this.diagramMove);\n  }\n\n  diagramMove(i, el) {\n    Diagram_$(el).on('mouseover', this.makeAddHovered(i));\n    Diagram_$(el).on('mouseout', this.makeRemoveHovered(i));\n  }\n\n  makeAddHovered(i) {\n    return () => {\n      var _this$$numberList$i, _this$$unitsList$i;\n\n      this.$votes.addClass(this.hideNumberClass);\n      (_this$$numberList$i = this.$numberList[i]) === null || _this$$numberList$i === void 0 ? void 0 : _this$$numberList$i.classList.remove(this.hideNumberClass);\n      (_this$$unitsList$i = this.$unitsList[i]) === null || _this$$unitsList$i === void 0 ? void 0 : _this$$unitsList$i.classList.add(this.hoverClass);\n    };\n  }\n\n  makeRemoveHovered(i) {\n    return () => {\n      var _this$$numberList$i2, _this$$unitsList$i2;\n\n      this.$votes.removeClass(this.hideNumberClass);\n      (_this$$numberList$i2 = this.$numberList[i]) === null || _this$$numberList$i2 === void 0 ? void 0 : _this$$numberList$i2.classList.add(this.hideNumberClass);\n      (_this$$unitsList$i2 = this.$unitsList[i]) === null || _this$$unitsList$i2 === void 0 ? void 0 : _this$$unitsList$i2.classList.remove(this.hoverClass);\n    };\n  }\n\n}, (Diagram_applyDecoratedDescriptor(Diagram_class.prototype, \"diagramMove\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(Diagram_class.prototype, \"diagramMove\"), Diagram_class.prototype), Diagram_applyDecoratedDescriptor(Diagram_class.prototype, \"makeAddHovered\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(Diagram_class.prototype, \"makeAddHovered\"), Diagram_class.prototype), Diagram_applyDecoratedDescriptor(Diagram_class.prototype, \"makeRemoveHovered\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(Diagram_class.prototype, \"makeRemoveHovered\"), Diagram_class.prototype)), Diagram_class);\n/* harmony default export */ const diagram_Diagram = (Diagram);\n;// CONCATENATED MODULE: ./components/diagram/index.js\n/* provided dependency */ var diagram_$ = __webpack_require__(638);\n\ndiagram_$(() => {\n  const diagram = new diagram_Diagram();\n  diagram.init();\n});\n;// CONCATENATED MODULE: ./components/button-like/ButtonLike.js\nvar ButtonLike_class;\n\nfunction ButtonLike_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\n\nlet ButtonLike = (ButtonLike_class = class ButtonLike {\n  constructor() {\n    this.findButton();\n    this.setDefaultProps();\n  }\n\n  findButton() {\n    this.buttonLike = document.querySelectorAll('.js-button-like');\n  }\n\n  setDefaultProps() {\n    this.textSelector = '.js-button-like__text';\n    this.toggleSelector = 'button-like_active';\n  }\n\n  init() {\n    this.buttonLike.forEach(this.eventHandler);\n  }\n\n  eventHandler(el) {\n    const text = el.querySelector(this.textSelector);\n    el.addEventListener('click', this.makeToggleClassHandler(text));\n  }\n\n  makeToggleClassHandler(element) {\n    const text = element;\n    return event => {\n      const target = event.currentTarget;\n      const span = element.textContent;\n      const active = target.classList.toggle(this.toggleSelector);\n\n      if (active) {\n        target.firstElementChild.textContent = 'favorite';\n        text.textContent = Number(span) + 1;\n        return;\n      }\n\n      target.classList.remove(this.toggleSelector);\n      target.firstElementChild.textContent = 'favorite_border';\n      text.textContent = Number(span) - 1;\n    };\n  }\n\n}, (ButtonLike_applyDecoratedDescriptor(ButtonLike_class.prototype, \"eventHandler\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(ButtonLike_class.prototype, \"eventHandler\"), ButtonLike_class.prototype), ButtonLike_applyDecoratedDescriptor(ButtonLike_class.prototype, \"makeToggleClassHandler\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(ButtonLike_class.prototype, \"makeToggleClassHandler\"), ButtonLike_class.prototype)), ButtonLike_class);\n/* harmony default export */ const button_like_ButtonLike = (ButtonLike);\n;// CONCATENATED MODULE: ./components/button-like/index.js\n/* provided dependency */ var button_like_$ = __webpack_require__(638);\n\nbutton_like_$(() => {\n  const buttonLike = new button_like_ButtonLike();\n  buttonLike.init();\n});\n;// CONCATENATED MODULE: ./components/review/index.js\n\n// EXTERNAL MODULE: ../node_modules/air-datepicker/src/js/air-datepicker.js\nvar air_datepicker = __webpack_require__(248);\n// EXTERNAL MODULE: ../node_modules/jquery-mask-plugin/dist/jquery.mask.js\nvar jquery_mask = __webpack_require__(587);\n;// CONCATENATED MODULE: ./libs/datepicker/index.js\n/* provided dependency */ var datepicker_$ = __webpack_require__(638);\nvar datepicker_class;\n\nfunction datepicker_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\n\n\n\nlet DatePicker = (datepicker_class = class DatePicker {\n  constructor(options) {\n    this.props = {\n      position: 'bottom center',\n      range: true,\n      navTitles: {\n        days: 'MM yyyy'\n      },\n      clearButton: true,\n      prevHtml: 'arrow_back',\n      nextHtml: 'arrow_forward',\n      minDate: new Date(),\n      keyboardNav: false,\n      multipleDates: 2,\n\n      onSelect(formattedDate, date, picker) {\n        const el = picker.$el.siblings(options.labelClass);\n        el.children(options.inputLeftClass).val(formattedDate.split(',')[0]);\n        el.children(options.inputRightClass).val(formattedDate.split(',')[1]);\n      }\n\n    };\n    this.propsRange = {\n      position: 'bottom center',\n      range: true,\n      navTitles: {\n        days: 'MM yyyy'\n      },\n      dateFormat: 'd M',\n      clearButton: true,\n      prevHtml: 'arrow_back',\n      nextHtml: 'arrow_forward',\n      minDate: new Date(),\n      keyboardNav: false,\n      multipleDates: 2,\n      multipleDatesSeparator: ' - '\n    };\n    this.datepickerRangeClass = options.datepickerRange;\n    this.datepickerClass = options.datepicker;\n    this.inputClass = options.inputClass;\n    this.inputLeftClass = options.inputLeftClass;\n    this.inputRightClass = options.inputRightClass;\n    this.labelClass = options.labelClass;\n    this.btnApplyClass = options.btnApplyClass;\n    this.defaultProps();\n    this.findDatepicker();\n  }\n\n  defaultProps() {\n    this.selectDate = {};\n    this.prevDay = new Date();\n    this.btnClass = '.datepicker--buttons';\n  }\n\n  findDatepicker() {\n    this.$datepickerRange = datepicker_$(this.datepickerRangeClass);\n    this.$datepicker = datepicker_$(`${this.datepickerClass}, ${this.datepickerRangeClass}`);\n  }\n\n  init() {\n    this.$datepicker.each(this.addClassDatePicker);\n\n    if (this.labelClass) {\n      datepicker_$(this.labelClass).each((_, el) => {\n        const $datePicker = datepicker_$(el).siblings(this.datepickerClass);\n        datepicker_$(el).click(this.makeShowSelectLabel($datePicker));\n      });\n    }\n\n    if (this.inputLeftClass) {\n      datepicker_$(this.inputLeftClass).each((_, el) => {\n        const $datePicker = datepicker_$(el).closest(this.labelClass).siblings(this.datepickerClass);\n        datepicker_$(el).change(this.makeChangeSelectInput($datePicker, el));\n      });\n    }\n\n    if (this.inputRightClass) {\n      datepicker_$(this.inputRightClass).each((_, el) => {\n        const $datePicker = datepicker_$(el).closest(this.labelClass).siblings(this.datepickerClass);\n        datepicker_$(el).change(this.makeChangeSelectInput($datePicker, el));\n      });\n    }\n\n    this.$datepickerRange.datepicker(this.propsRange);\n    datepicker_$(this.inputClass).mask('00.00.0000');\n    this.$datepickerRange.mask('00 ZZZ - 00 ZZZ', {\n      translation: {\n        Z: {\n          pattern: /[A-zА-я]/\n        }\n      }\n    });\n\n    if (this.btnClass) {\n      datepicker_$(this.btnClass).each((_, el) => {\n        if (!datepicker_$(el).find('.datepicker--button-apply').length) {\n          datepicker_$(el).find('span.datepicker--button').remove();\n          datepicker_$(el).append(`<button class=\"datepicker--button\" data-action=\"clear\" type=\"button\">\n               Очистить\n            </button>\n            <button class=\"datepicker--button-apply\n            ${this.btnApplyClass.replace(/^\\./, '')}\" type=\"button\">\n              Применить\n            </button>`);\n        }\n      });\n    }\n\n    this.$datepicker.each((ind, el) => {\n      datepicker_$(el).data('datepicker').$datepicker.find(this.btnApplyClass).on('click', this.makeHideDatePicker(ind));\n    });\n  }\n\n  makeChangeSelectInput($datepicker, input) {\n    const el = $datepicker.data('datepicker');\n    return () => {\n      var _el$selectedDates$, _el$selectedDates$2;\n\n      let [day, month, year] = datepicker_$(input).val().split('.');\n      month = Number(month) - 1;\n      this.prevDay = new Date(year, month, day) > new Date() ? new Date(year, month, day) : new Date();\n\n      if (((_el$selectedDates$ = el.selectedDates[0]) === null || _el$selectedDates$ === void 0 ? void 0 : _el$selectedDates$.getTime()) === this.prevDay.getTime()) {\n        return;\n      }\n\n      if (((_el$selectedDates$2 = el.selectedDates[1]) === null || _el$selectedDates$2 === void 0 ? void 0 : _el$selectedDates$2.getTime()) === this.prevDay.getTime()) {\n        return;\n      }\n\n      el.selectDate(this.prevDay);\n    };\n  }\n\n  makeHideDatePicker(ind) {\n    return () => {\n      datepicker_$(this.$datepicker[ind]).data('datepicker').hide();\n    };\n  }\n\n  makeShowSelectLabel($el) {\n    return () => {\n      $el.data('datepicker').show();\n    };\n  }\n\n  addClassDatePicker(i, el) {\n    datepicker_$(el).addClass(`js-date-picker-${i}`);\n    this.selectDate[`js-date-picker-${i}`] = datepicker_$(el).datepicker(this.props);\n  }\n\n}, (datepicker_applyDecoratedDescriptor(datepicker_class.prototype, \"makeChangeSelectInput\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(datepicker_class.prototype, \"makeChangeSelectInput\"), datepicker_class.prototype), datepicker_applyDecoratedDescriptor(datepicker_class.prototype, \"addClassDatePicker\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(datepicker_class.prototype, \"addClassDatePicker\"), datepicker_class.prototype)), datepicker_class);\n\n;// CONCATENATED MODULE: ./components/date-picker/index.js\n/* provided dependency */ var date_picker_$ = __webpack_require__(638);\n\ndate_picker_$(() => {\n  const options = {\n    datepicker: '.js-date-picker',\n    datepickerRange: '.js-date-picker_range',\n    inputClass: '.js-date-picker__input',\n    inputLeftClass: '.js-date-picker__input_left',\n    inputRightClass: '.js-date-picker__input_right',\n    labelClass: '.js-date-picker__label',\n    btnApplyClass: '.js-datepicker--button-apply',\n    iconBack: '<i class=\"date-picker__icon\">arrow_back</i>',\n    iconForward: '<i class=\"date-picker__icon\">arrow_forward</i>'\n  };\n  const datePick = new DatePicker(options);\n  datePick.init();\n});\n;// CONCATENATED MODULE: ./components/drop-down/DropDown.js\n/* provided dependency */ var DropDown_$ = __webpack_require__(638);\nvar DropDown_class;\n\nfunction DropDown_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\n\nlet DropDown = (DropDown_class = class DropDown {\n  constructor() {\n    this.setDefaultProps();\n    this.setDefaultClassName();\n  }\n\n  setDefaultProps() {\n    this.children = {};\n    this.dropDown = {};\n  }\n\n  setDefaultClassName() {\n    this.dropDownClass = '.js-drop-down__select';\n    this.dropDownExtendClass = '.js-drop-down__select_extended';\n    this.controlPanelClass = '.js-drop-down__control-panel';\n    this.buttonClass = '.js-drop-down__button';\n    this.dropItemsClass = '.js-drop-down__items';\n    this.dropItemClass = '.js-drop-down__item';\n    this.itemCurrentClass = '.js-drop-down__item-current';\n    this.btnSubmitClass = '.js-drop-down__submit-button';\n    this.btnMinusClass = '.js-btn_minus';\n    this.btnResetClass = '.js-drop-down__reset-button';\n    this.spanClass = '.js-drop-down__span';\n    this.textCurrentClass = '.js-drop-down__text-current';\n    this.itemSpanClass = '.js-drop-down__item-span';\n    this.buttonDisableClass = 'drop-down__button_disabled';\n    this.toggleClass = 'drop-down__select_active';\n  }\n\n  init() {\n    DropDown_$(this.dropDownClass).each((i, el) => {\n      const className = `.js-dpd_slt-${i}`;\n      const name = `js-dpd_slt-${i}`;\n      this.dropDown[className] = DropDown_$(el);\n      el.classList.add(name);\n      this.showDropItems(className);\n      this.slideDrop(className);\n      this.childrenCurrentVal(className);\n      this.addHandleButtonClick(className);\n    });\n    DropDown_$(this.dropDownExtendClass).each((i, el) => {\n      const className = `.js-dp_ext-${i}`;\n      const name = `js-dp_ext-${i}`;\n      this.dropDown[className] = DropDown_$(el);\n      el.classList.add(name);\n      this.showDropItems(className);\n      this.slideDrop(className);\n      this.childrenCurrentVal(className);\n      this.actionDropDownExtended(className);\n      this.buttonAction(className);\n    });\n  }\n\n  showDropItems(selector) {\n    if (!DropDown_$(selector).hasClass(this.toggleClass)) {\n      DropDown_$(`${selector} ${this.dropItemsClass}`).slideToggle(0);\n    }\n  }\n\n  slideDrop(selector) {\n    const current = this.dropDown[selector].children(`${this.itemCurrentClass}`);\n    const btn = this.dropDown[selector].find(`${this.btnSubmitClass}`);\n    current.on('click', this.makeToggleDropDownHandler(selector));\n    document.addEventListener('click', this.makeCloseDropDownHandler(selector));\n\n    if (btn.length) {\n      btn.on('click', this.makeToggleDropDownHandler(selector));\n    }\n  }\n\n  makeCloseDropDownHandler(selector) {\n    return event => {\n      const isHave = !!event.target.closest(selector);\n\n      if (!isHave) {\n        const items = this.dropDown[selector].find(`${this.dropItemsClass}`);\n        items.slideUp(300);\n        this.dropDown[selector].removeClass(this.toggleClass);\n      }\n    };\n  }\n\n  makeToggleDropDownHandler(selector) {\n    const items = this.dropDown[selector].find(`${this.dropItemsClass}`);\n    return () => {\n      items.slideToggle(300);\n      this.dropDown[selector].toggleClass(this.toggleClass);\n    };\n  }\n\n  addHandleButtonClick(selector) {\n    this.dropDown[selector].find(this.controlPanelClass).each((i, el) => {\n      DropDown_$(el).children(this.buttonClass).on('click', this.makeOperationSumHandler({\n        selector,\n        i,\n        el\n      }, this.textCurrentNew));\n    });\n  }\n\n  actionDropDownExtended(selector) {\n    const $btnReset = this.dropDown[selector].find(this.btnResetClass);\n    this.dropDown[selector].find(this.controlPanelClass).each((i, el) => {\n      DropDown_$(el).children(this.buttonClass).on('click', this.makeOperationSumHandler({\n        selector,\n        i,\n        el\n      }, this.textModify));\n      DropDown.btnHide($btnReset, this.children[selector][i]);\n    });\n  }\n\n  makeOperationSumHandler(options, callBack) {\n    const {\n      selector,\n      i,\n      el\n    } = options;\n    const $span = DropDown_$(el).find(this.spanClass);\n    const $btnMinus = DropDown_$(el).children(this.btnMinusClass);\n    this.disableButton($btnMinus, $span);\n    return event => {\n      let item = this.children[selector][i];\n      const sum = event.currentTarget.textContent;\n      item += Number(`${sum}1`);\n\n      if (item <= 0) {\n        item = 0;\n      }\n\n      this.children[selector][i] = item;\n      $span.text(item);\n      callBack(selector);\n      this.disableButton($btnMinus, $span);\n    };\n  }\n\n  disableButton($btn, $span) {\n    if ($span.text() <= 0) {\n      $btn.addClass(this.buttonDisableClass);\n    } else {\n      $btn.removeClass(this.buttonDisableClass);\n    }\n  }\n\n  buttonAction(selector) {\n    this.dropDown[selector].find(this.btnResetClass).on('click', this.makeResetHandler(selector));\n  }\n\n  makeResetHandler(selector) {\n    const $currentText = this.dropDown[selector].find(this.textCurrentClass);\n    const $span = this.dropDown[selector].find(this.spanClass);\n    const $btnMinus = this.dropDown[selector].find(this.btnMinusClass);\n    return event => {\n      $currentText.text('Сколько гостей');\n      $span.text(0);\n      $btnMinus.addClass(this.buttonDisableClass);\n      this.children[selector].fill(0);\n      DropDown.btnHide(DropDown_$(event.currentTarget), 0);\n    };\n  }\n\n  dropItem(el) {\n    return {\n      count: DropDown_$(el).find(this.spanClass).text(),\n      name: DropDown_$(el).children(this.itemSpanClass).text()\n    };\n  }\n\n  textCurrentNew(selector) {\n    let textCurrent = '';\n    let countElem = 0;\n    this.dropDown[selector].find(this.dropItemClass).each((_, el) => {\n      const {\n        count,\n        name: nameElem\n      } = this.dropItem(el);\n\n      if (count > 0) {\n        countElem += 1;\n        textCurrent = `${DropDown.getText(textCurrent, countElem)} ${count} ${nameElem}`;\n      }\n    });\n    this.dropDown[selector].find(this.textCurrentClass).text(textCurrent);\n  }\n\n  static getText(textCurrent, countElem) {\n    return `${textCurrent}${countElem >= 2 ? ', ' : ' '}`;\n  }\n\n  textModify(selector) {\n    let textCurrent = 'Сколько гостей';\n    let adults = 0; // счетчик взрослых\n\n    let child = 0; // счетчик младенцев\n\n    const $btnReset = this.dropDown[selector].find(this.btnResetClass);\n    this.dropDown[selector].find(`${this.dropItemClass}`).each((_, el) => {\n      const {\n        count,\n        name\n      } = this.dropItem(el);\n\n      if (name === 'младенцы') {\n        child = count;\n      } else {\n        adults += +count;\n      }\n\n      textCurrent = DropDown.countAdult(adults, child) + DropDown.countChild(child);\n    });\n    this.dropDown[selector].find(this.textCurrentClass).text(textCurrent);\n    DropDown.btnHide($btnReset, adults, child);\n  }\n\n  static btnHide($btnReset, adults, child = 0) {\n    if (adults <= 0 && child <= 0) {\n      $btnReset.css('opacity', 0);\n    } else {\n      $btnReset.css('opacity', 1);\n    }\n  }\n\n  static countAdult(count, child) {\n    const s = child > 0 ? ', ' : ' ';\n\n    switch (true) {\n      case count <= 0:\n        return ' ';\n\n      case count <= 1:\n        return `${count} гость${s}`;\n\n      case count <= 4:\n        return `${count} гостя${s}`;\n\n      default:\n        return `${count} гостей${s}`;\n    }\n  }\n\n  static countChild(count) {\n    switch (true) {\n      case count <= 0:\n        return '';\n\n      case count <= 1:\n        return `${count} младенец`;\n\n      case count <= 4:\n        return `${count} младенца`;\n\n      default:\n        return `${count} младенцев`;\n    }\n  }\n\n  childrenCurrentVal(className) {\n    this.children[className] = [];\n    DropDown_$(`${className} ${this.spanClass}`).each((i, el) => {\n      this.children[className][i] = +el.textContent;\n    });\n  }\n\n}, (DropDown_applyDecoratedDescriptor(DropDown_class.prototype, \"makeCloseDropDownHandler\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(DropDown_class.prototype, \"makeCloseDropDownHandler\"), DropDown_class.prototype), DropDown_applyDecoratedDescriptor(DropDown_class.prototype, \"textCurrentNew\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(DropDown_class.prototype, \"textCurrentNew\"), DropDown_class.prototype), DropDown_applyDecoratedDescriptor(DropDown_class.prototype, \"textModify\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(DropDown_class.prototype, \"textModify\"), DropDown_class.prototype)), DropDown_class);\n/* harmony default export */ const drop_down_DropDown = (DropDown);\n;// CONCATENATED MODULE: ./components/drop-down/index.js\n/* provided dependency */ var drop_down_$ = __webpack_require__(638);\n\ndrop_down_$(() => {\n  const dropdown = new drop_down_DropDown();\n  dropdown.init();\n});\n;// CONCATENATED MODULE: ./components/card-room/CardRoom.js\n/* provided dependency */ var CardRoom_$ = __webpack_require__(638);\nvar CardRoom_class;\n\nfunction CardRoom_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\n\nlet CardRoom = (CardRoom_class = class CardRoom {\n  constructor() {\n    this.findCardRoom();\n    this.findInput();\n    this.setDefaultClassName();\n  }\n\n  findCardRoom() {\n    this.$card = CardRoom_$('.js-card-room');\n  }\n\n  findInput() {\n    this.$input = this.$card.find('.js-date-picker');\n  }\n\n  setDefaultClassName() {\n    this.buttonApplyClass = '.js-datepicker--button-apply';\n    this.roomInfoClass = '.js-card-room__info';\n    this.roomDataClass = '.js-card-room__data';\n    this.totalAmountClass = '.js-card-room__total-amount';\n    this.saleClass = '.js-card-room__sale';\n    this.priceDayClass = '.js-card-room__price-day';\n    this.totalPriceClass = '.js-card-room__total-price';\n    this.additionalClass = '.js-card-room__additional';\n    this.infoSumClass = '.js-card-room__info-sum';\n    this.infoNameClass = '.js-card-room__info-name';\n    this.priceNumberClass = '.js-card-room_ _price-number';\n  }\n\n  init() {\n    const buttons = [];\n    this.$input.each((_, el) => {\n      buttons.push(CardRoom_$(el).data('datepicker').$datepicker.find(this.buttonApplyClass));\n    });\n    buttons.forEach(this.handleButtonApply);\n    CardRoom_$(this.infoSumClass).text((_, el) => CardRoom.replace(el));\n    CardRoom_$(this.infoNameClass).text((_, el) => CardRoom.replace(el));\n    CardRoom_$(this.totalPriceClass).text((_, el) => CardRoom.replace(el));\n    CardRoom_$(this.priceNumberClass).text((_, el) => CardRoom.replace(el));\n  }\n\n  handleButtonApply(el, ind) {\n    const $currentDP = CardRoom_$(this.$input[ind]);\n    const $block = $currentDP.closest(this.roomDataClass).siblings(this.roomInfoClass);\n    const $pay = $block.find(this.totalAmountClass);\n    const $dop = $block.find(this.additionalClass);\n    const $sale = $block.find(this.saleClass);\n    const $price = $block.find(this.priceDayClass);\n    const $resultSum = $block.find(this.totalPriceClass);\n    CardRoom_$(el).on('click', CardRoom.makeEventHandler({\n      $currentDP,\n      $pay,\n      $dop,\n      $sale,\n      $price,\n      $resultSum\n    }));\n  }\n\n  static makeEventHandler(options) {\n    const {\n      $currentDP,\n      $pay,\n      $dop,\n      $sale,\n      $price,\n      $resultSum\n    } = options;\n    return () => {\n      const [to, from] = $currentDP.data('datepicker').selectedDates;\n      let date = Math.ceil((from - to) / 1000 / 60 / 60 / 24);\n\n      if (!date) {\n        date = 1;\n      }\n\n      let pay = CardRoom.priceReg($pay);\n      let dop = CardRoom.priceReg($dop);\n      let sale = CardRoom.priceReg($sale);\n      $pay.text(`${pay} ₽  * ${date} суток`);\n      pay = parseInt(pay[0].replace(/\\s+/g, ''), 10) * date;\n      dop = parseInt(dop[0].replace(/\\s+/g, ''), 10);\n      sale = parseInt(sale[0].replace(/\\s+/g, ''), 10);\n      $price.text(`${CardRoom.replace(pay)} ₽`);\n      $resultSum.text(`${CardRoom.replace(+pay + dop - sale)}₽`);\n    };\n  }\n\n  static priceReg($jq) {\n    return $jq.text().match(/[\\d+\\s?]+(?=₽)/m);\n  }\n\n  static replace(el) {\n    return el.toString().replace(/(\\d{1,3}(?=(?:\\d\\d\\d)+(?!\\d)))/g, '$1 ');\n  }\n\n}, (CardRoom_applyDecoratedDescriptor(CardRoom_class.prototype, \"handleButtonApply\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(CardRoom_class.prototype, \"handleButtonApply\"), CardRoom_class.prototype), CardRoom_applyDecoratedDescriptor(CardRoom_class, \"makeEventHandler\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(CardRoom_class, \"makeEventHandler\"), CardRoom_class)), CardRoom_class);\n/* harmony default export */ const card_room_CardRoom = (CardRoom);\n;// CONCATENATED MODULE: ./components/card-room/index.js\n/* provided dependency */ var card_room_$ = __webpack_require__(638);\n\n\n\ncard_room_$(() => {\n  const cardRoom = new card_room_CardRoom();\n  cardRoom.init();\n});\n;// CONCATENATED MODULE: ./pages/room-details/index.js\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTY2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9tZW51L01lbnUuanM/YWRiMCIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL21lbnUvaW5kZXguanM/MTA1ZSIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL2RpYWdyYW0vRGlhZ3JhbS5qcz83MWFmIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvZGlhZ3JhbS9pbmRleC5qcz9kZDE4Iiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvYnV0dG9uLWxpa2UvQnV0dG9uTGlrZS5qcz9jOTA0Iiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvYnV0dG9uLWxpa2UvaW5kZXguanM/NzY2YSIsIndlYnBhY2s6Ly8vLi9saWJzL2RhdGVwaWNrZXIvaW5kZXguanM/ZTQ0NyIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL2RhdGUtcGlja2VyL2luZGV4LmpzP2YxMGEiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9kcm9wLWRvd24vRHJvcERvd24uanM/NTRhNSIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL2Ryb3AtZG93bi9pbmRleC5qcz82MjBhIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvY2FyZC1yb29tL0NhcmRSb29tLmpzPzFjZTYiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9jYXJkLXJvb20vaW5kZXguanM/MWQxYyIsIndlYnBhY2s6Ly8vLi9wYWdlcy9yb29tLWRldGFpbHMvaW5kZXguanM/YTA4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgX2NsYXNzO1xuXG5mdW5jdGlvbiBfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKHRhcmdldCwgcHJvcGVydHksIGRlY29yYXRvcnMsIGRlc2NyaXB0b3IsIGNvbnRleHQpIHsgdmFyIGRlc2MgPSB7fTsgT2JqZWN0LmtleXMoZGVzY3JpcHRvcikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IGRlc2Nba2V5XSA9IGRlc2NyaXB0b3Jba2V5XTsgfSk7IGRlc2MuZW51bWVyYWJsZSA9ICEhZGVzYy5lbnVtZXJhYmxlOyBkZXNjLmNvbmZpZ3VyYWJsZSA9ICEhZGVzYy5jb25maWd1cmFibGU7IGlmICgndmFsdWUnIGluIGRlc2MgfHwgZGVzYy5pbml0aWFsaXplcikgeyBkZXNjLndyaXRhYmxlID0gdHJ1ZTsgfSBkZXNjID0gZGVjb3JhdG9ycy5zbGljZSgpLnJldmVyc2UoKS5yZWR1Y2UoZnVuY3Rpb24gKGRlc2MsIGRlY29yYXRvcikgeyByZXR1cm4gZGVjb3JhdG9yKHRhcmdldCwgcHJvcGVydHksIGRlc2MpIHx8IGRlc2M7IH0sIGRlc2MpOyBpZiAoY29udGV4dCAmJiBkZXNjLmluaXRpYWxpemVyICE9PSB2b2lkIDApIHsgZGVzYy52YWx1ZSA9IGRlc2MuaW5pdGlhbGl6ZXIgPyBkZXNjLmluaXRpYWxpemVyLmNhbGwoY29udGV4dCkgOiB2b2lkIDA7IGRlc2MuaW5pdGlhbGl6ZXIgPSB1bmRlZmluZWQ7IH0gaWYgKGRlc2MuaW5pdGlhbGl6ZXIgPT09IHZvaWQgMCkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzYyk7IGRlc2MgPSBudWxsOyB9IHJldHVybiBkZXNjOyB9XG5cbmltcG9ydCB7IGJvdW5kTWV0aG9kIH0gZnJvbSAnYXV0b2JpbmQtZGVjb3JhdG9yJztcbmxldCBNZW51ID0gKF9jbGFzcyA9IGNsYXNzIE1lbnUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNldERlZmF1bHRDbGFzc05hbWUoKTtcbiAgICB0aGlzLmZpbmRNZW51SXRlbSgpO1xuICB9XG5cbiAgc2V0RGVmYXVsdENsYXNzTmFtZSgpIHtcbiAgICB0aGlzLnRvZ2dsZUNsYXNzID0gJ21lbnVfX2J1cmdlcl9hY3RpdmUnO1xuICAgIHRoaXMubWVudUl0ZW1MaXN0Q2xhc3MgPSAnLmpzLW1lbnVfX2l0ZW1fd2l0aC1saXN0JztcbiAgICB0aGlzLml0ZW1zQ2xhc3MgPSAnLmpzLW1lbnVfX2l0ZW1zJztcbiAgICB0aGlzLmJ1cmdlckNsYXNzID0gJy5qcy1tZW51X19idXJnZXInO1xuICAgIHRoaXMuY2xvc2VDbGFzcyA9ICcuanMtbWVudV9fY2xvc2UnO1xuICAgIHRoaXMuZHJvcExpc3RDbGFzcyA9ICcuanMtbWVudV9fZHJvcC1saXN0JztcbiAgfVxuXG4gIGZpbmRNZW51SXRlbSgpIHtcbiAgICB0aGlzLiRidXJnZXIgPSAkKHRoaXMuYnVyZ2VyQ2xhc3MpO1xuICAgIHRoaXMuJG1lbnUgPSAkKHRoaXMuaXRlbXNDbGFzcyk7XG4gICAgdGhpcy4kY2xvc2VCdXR0b24gPSAkKHRoaXMuY2xvc2VDbGFzcyk7XG4gIH1cblxuICBpbml0KCkge1xuICAgIHRoaXMuJGJ1cmdlci5vbignY2xpY2snLCB0aGlzLmhhbmRsZVRvZ2dsZU1lbnVCdXJnZXJDbGljayk7XG4gICAgdGhpcy4kY2xvc2VCdXR0b24ub24oJ2NsaWNrJywgdGhpcy5oYW5kbGVySGlkZUJ1cmdlck1lbnVDbGljayk7XG4gICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgdGhpcy5oYW5kbGVyRG9jdW1lbnRDbGljayk7XG4gICAgJCh0aGlzLm1lbnVJdGVtTGlzdENsYXNzKS5ob3Zlcih0aGlzLmhhbmRsZXJJbiwgdGhpcy5oYW5kbGVyT3V0KTtcbiAgfVxuXG4gIGhhbmRsZXJEb2N1bWVudENsaWNrKGV2ZW50KSB7XG4gICAgaWYgKCQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KHRoaXMuaXRlbXNDbGFzcykubGVuZ3RoIHx8ICQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KHRoaXMuYnVyZ2VyQ2xhc3MpLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuaGFuZGxlckhpZGVCdXJnZXJNZW51Q2xpY2soKTtcbiAgfVxuXG4gIGhhbmRsZXJIaWRlQnVyZ2VyTWVudUNsaWNrKCkge1xuICAgIHRoaXMuJG1lbnUucmVtb3ZlQ2xhc3ModGhpcy50b2dnbGVDbGFzcyk7XG4gIH1cblxuICBoYW5kbGVySW4oZXZlbnQpIHtcbiAgICAkKHRoaXMuZHJvcExpc3RDbGFzcywgZXZlbnQuY3VycmVudFRhcmdldCkuc3RvcCgpLnNsaWRlRG93bigyMDApO1xuICB9XG5cbiAgaGFuZGxlck91dChldmVudCkge1xuICAgICQodGhpcy5kcm9wTGlzdENsYXNzLCBldmVudC5jdXJyZW50VGFyZ2V0KS5zdG9wKCkuc2xpZGVVcCgyMDApO1xuICB9XG5cbiAgaGFuZGxlVG9nZ2xlTWVudUJ1cmdlckNsaWNrKGV2ZW50KSB7XG4gICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5zaWJsaW5ncyh0aGlzLml0ZW1zQ2xhc3MpLnRvZ2dsZUNsYXNzKHRoaXMudG9nZ2xlQ2xhc3MpO1xuICB9XG5cbn0sIChfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsIFwiaGFuZGxlckRvY3VtZW50Q2xpY2tcIiwgW2JvdW5kTWV0aG9kXSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcImhhbmRsZXJEb2N1bWVudENsaWNrXCIpLCBfY2xhc3MucHJvdG90eXBlKSwgX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcImhhbmRsZXJIaWRlQnVyZ2VyTWVudUNsaWNrXCIsIFtib3VuZE1ldGhvZF0sIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJoYW5kbGVySGlkZUJ1cmdlck1lbnVDbGlja1wiKSwgX2NsYXNzLnByb3RvdHlwZSksIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJoYW5kbGVySW5cIiwgW2JvdW5kTWV0aG9kXSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcImhhbmRsZXJJblwiKSwgX2NsYXNzLnByb3RvdHlwZSksIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJoYW5kbGVyT3V0XCIsIFtib3VuZE1ldGhvZF0sIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJoYW5kbGVyT3V0XCIpLCBfY2xhc3MucHJvdG90eXBlKSwgX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcImhhbmRsZVRvZ2dsZU1lbnVCdXJnZXJDbGlja1wiLCBbYm91bmRNZXRob2RdLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsIFwiaGFuZGxlVG9nZ2xlTWVudUJ1cmdlckNsaWNrXCIpLCBfY2xhc3MucHJvdG90eXBlKSksIF9jbGFzcyk7XG5leHBvcnQgZGVmYXVsdCBNZW51OyIsImltcG9ydCBNZW51IGZyb20gJy4vTWVudSc7XG4kKCgpID0+IHtcbiAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XG4gIG1lbnUuaW5pdCgpO1xufSk7IiwidmFyIF9jbGFzcztcblxuZnVuY3Rpb24gX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcih0YXJnZXQsIHByb3BlcnR5LCBkZWNvcmF0b3JzLCBkZXNjcmlwdG9yLCBjb250ZXh0KSB7IHZhciBkZXNjID0ge307IE9iamVjdC5rZXlzKGRlc2NyaXB0b3IpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBkZXNjW2tleV0gPSBkZXNjcmlwdG9yW2tleV07IH0pOyBkZXNjLmVudW1lcmFibGUgPSAhIWRlc2MuZW51bWVyYWJsZTsgZGVzYy5jb25maWd1cmFibGUgPSAhIWRlc2MuY29uZmlndXJhYmxlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjIHx8IGRlc2MuaW5pdGlhbGl6ZXIpIHsgZGVzYy53cml0YWJsZSA9IHRydWU7IH0gZGVzYyA9IGRlY29yYXRvcnMuc2xpY2UoKS5yZXZlcnNlKCkucmVkdWNlKGZ1bmN0aW9uIChkZXNjLCBkZWNvcmF0b3IpIHsgcmV0dXJuIGRlY29yYXRvcih0YXJnZXQsIHByb3BlcnR5LCBkZXNjKSB8fCBkZXNjOyB9LCBkZXNjKTsgaWYgKGNvbnRleHQgJiYgZGVzYy5pbml0aWFsaXplciAhPT0gdm9pZCAwKSB7IGRlc2MudmFsdWUgPSBkZXNjLmluaXRpYWxpemVyID8gZGVzYy5pbml0aWFsaXplci5jYWxsKGNvbnRleHQpIDogdm9pZCAwOyBkZXNjLmluaXRpYWxpemVyID0gdW5kZWZpbmVkOyB9IGlmIChkZXNjLmluaXRpYWxpemVyID09PSB2b2lkIDApIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHksIGRlc2MpOyBkZXNjID0gbnVsbDsgfSByZXR1cm4gZGVzYzsgfVxuXG5pbXBvcnQgeyBib3VuZE1ldGhvZCB9IGZyb20gJ2F1dG9iaW5kLWRlY29yYXRvcic7XG5sZXQgRGlhZ3JhbSA9IChfY2xhc3MgPSBjbGFzcyBEaWFncmFtIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zZXREZWZhdWx0Q2xhc3NOYW1lKCk7XG4gICAgdGhpcy5maW5kRGlhZ3JhbUVsZW1lbnRzKCk7XG4gIH1cblxuICBzZXREZWZhdWx0Q2xhc3NOYW1lKCkge1xuICAgIHRoaXMuaG92ZXJDbGFzcyA9ICdkaWFncmFtX19ob3ZlcmVkJztcbiAgICB0aGlzLmhpZGVOdW1iZXJDbGFzcyA9ICdkaWFncmFtX19jaGFydC1udW1iZXJfaGlkZGVuJztcbiAgfVxuXG4gIGZpbmREaWFncmFtRWxlbWVudHMoKSB7XG4gICAgdGhpcy4kbGVnZW5kRWwgPSAkKCcuanMtbGVnZW5kLWVsJyk7XG4gICAgdGhpcy4kdm90ZXMgPSAkKCcuanMtdm90ZXMnKTtcbiAgICB0aGlzLiR1bml0c0xpc3QgPSAkKCcuanMtdW5pdCcpO1xuICAgIHRoaXMuJG51bWJlckxpc3QgPSAkKCcuanMtbnVtYmVyJyk7XG4gIH1cblxuICBpbml0KCkge1xuICAgIHRoaXMuJGxlZ2VuZEVsLmVhY2godGhpcy5kaWFncmFtTW92ZSk7XG4gICAgdGhpcy4kdW5pdHNMaXN0LmVhY2godGhpcy5kaWFncmFtTW92ZSk7XG4gIH1cblxuICBkaWFncmFtTW92ZShpLCBlbCkge1xuICAgICQoZWwpLm9uKCdtb3VzZW92ZXInLCB0aGlzLm1ha2VBZGRIb3ZlcmVkKGkpKTtcbiAgICAkKGVsKS5vbignbW91c2VvdXQnLCB0aGlzLm1ha2VSZW1vdmVIb3ZlcmVkKGkpKTtcbiAgfVxuXG4gIG1ha2VBZGRIb3ZlcmVkKGkpIHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdmFyIF90aGlzJCRudW1iZXJMaXN0JGksIF90aGlzJCR1bml0c0xpc3QkaTtcblxuICAgICAgdGhpcy4kdm90ZXMuYWRkQ2xhc3ModGhpcy5oaWRlTnVtYmVyQ2xhc3MpO1xuICAgICAgKF90aGlzJCRudW1iZXJMaXN0JGkgPSB0aGlzLiRudW1iZXJMaXN0W2ldKSA9PT0gbnVsbCB8fCBfdGhpcyQkbnVtYmVyTGlzdCRpID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkbnVtYmVyTGlzdCRpLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5oaWRlTnVtYmVyQ2xhc3MpO1xuICAgICAgKF90aGlzJCR1bml0c0xpc3QkaSA9IHRoaXMuJHVuaXRzTGlzdFtpXSkgPT09IG51bGwgfHwgX3RoaXMkJHVuaXRzTGlzdCRpID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkdW5pdHNMaXN0JGkuY2xhc3NMaXN0LmFkZCh0aGlzLmhvdmVyQ2xhc3MpO1xuICAgIH07XG4gIH1cblxuICBtYWtlUmVtb3ZlSG92ZXJlZChpKSB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHZhciBfdGhpcyQkbnVtYmVyTGlzdCRpMiwgX3RoaXMkJHVuaXRzTGlzdCRpMjtcblxuICAgICAgdGhpcy4kdm90ZXMucmVtb3ZlQ2xhc3ModGhpcy5oaWRlTnVtYmVyQ2xhc3MpO1xuICAgICAgKF90aGlzJCRudW1iZXJMaXN0JGkyID0gdGhpcy4kbnVtYmVyTGlzdFtpXSkgPT09IG51bGwgfHwgX3RoaXMkJG51bWJlckxpc3QkaTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJCRudW1iZXJMaXN0JGkyLmNsYXNzTGlzdC5hZGQodGhpcy5oaWRlTnVtYmVyQ2xhc3MpO1xuICAgICAgKF90aGlzJCR1bml0c0xpc3QkaTIgPSB0aGlzLiR1bml0c0xpc3RbaV0pID09PSBudWxsIHx8IF90aGlzJCR1bml0c0xpc3QkaTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJCR1bml0c0xpc3QkaTIuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmhvdmVyQ2xhc3MpO1xuICAgIH07XG4gIH1cblxufSwgKF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJkaWFncmFtTW92ZVwiLCBbYm91bmRNZXRob2RdLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsIFwiZGlhZ3JhbU1vdmVcIiksIF9jbGFzcy5wcm90b3R5cGUpLCBfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsIFwibWFrZUFkZEhvdmVyZWRcIiwgW2JvdW5kTWV0aG9kXSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcIm1ha2VBZGRIb3ZlcmVkXCIpLCBfY2xhc3MucHJvdG90eXBlKSwgX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcIm1ha2VSZW1vdmVIb3ZlcmVkXCIsIFtib3VuZE1ldGhvZF0sIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJtYWtlUmVtb3ZlSG92ZXJlZFwiKSwgX2NsYXNzLnByb3RvdHlwZSkpLCBfY2xhc3MpO1xuZXhwb3J0IGRlZmF1bHQgRGlhZ3JhbTsiLCJpbXBvcnQgRGlhZ3JhbSBmcm9tICdAL2NvbXBvbmVudHMvZGlhZ3JhbS9EaWFncmFtJztcbiQoKCkgPT4ge1xuICBjb25zdCBkaWFncmFtID0gbmV3IERpYWdyYW0oKTtcbiAgZGlhZ3JhbS5pbml0KCk7XG59KTsiLCJ2YXIgX2NsYXNzO1xuXG5mdW5jdGlvbiBfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKHRhcmdldCwgcHJvcGVydHksIGRlY29yYXRvcnMsIGRlc2NyaXB0b3IsIGNvbnRleHQpIHsgdmFyIGRlc2MgPSB7fTsgT2JqZWN0LmtleXMoZGVzY3JpcHRvcikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IGRlc2Nba2V5XSA9IGRlc2NyaXB0b3Jba2V5XTsgfSk7IGRlc2MuZW51bWVyYWJsZSA9ICEhZGVzYy5lbnVtZXJhYmxlOyBkZXNjLmNvbmZpZ3VyYWJsZSA9ICEhZGVzYy5jb25maWd1cmFibGU7IGlmICgndmFsdWUnIGluIGRlc2MgfHwgZGVzYy5pbml0aWFsaXplcikgeyBkZXNjLndyaXRhYmxlID0gdHJ1ZTsgfSBkZXNjID0gZGVjb3JhdG9ycy5zbGljZSgpLnJldmVyc2UoKS5yZWR1Y2UoZnVuY3Rpb24gKGRlc2MsIGRlY29yYXRvcikgeyByZXR1cm4gZGVjb3JhdG9yKHRhcmdldCwgcHJvcGVydHksIGRlc2MpIHx8IGRlc2M7IH0sIGRlc2MpOyBpZiAoY29udGV4dCAmJiBkZXNjLmluaXRpYWxpemVyICE9PSB2b2lkIDApIHsgZGVzYy52YWx1ZSA9IGRlc2MuaW5pdGlhbGl6ZXIgPyBkZXNjLmluaXRpYWxpemVyLmNhbGwoY29udGV4dCkgOiB2b2lkIDA7IGRlc2MuaW5pdGlhbGl6ZXIgPSB1bmRlZmluZWQ7IH0gaWYgKGRlc2MuaW5pdGlhbGl6ZXIgPT09IHZvaWQgMCkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzYyk7IGRlc2MgPSBudWxsOyB9IHJldHVybiBkZXNjOyB9XG5cbmltcG9ydCB7IGJvdW5kTWV0aG9kIH0gZnJvbSAnYXV0b2JpbmQtZGVjb3JhdG9yJztcbmxldCBCdXR0b25MaWtlID0gKF9jbGFzcyA9IGNsYXNzIEJ1dHRvbkxpa2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmZpbmRCdXR0b24oKTtcbiAgICB0aGlzLnNldERlZmF1bHRQcm9wcygpO1xuICB9XG5cbiAgZmluZEJ1dHRvbigpIHtcbiAgICB0aGlzLmJ1dHRvbkxpa2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtYnV0dG9uLWxpa2UnKTtcbiAgfVxuXG4gIHNldERlZmF1bHRQcm9wcygpIHtcbiAgICB0aGlzLnRleHRTZWxlY3RvciA9ICcuanMtYnV0dG9uLWxpa2VfX3RleHQnO1xuICAgIHRoaXMudG9nZ2xlU2VsZWN0b3IgPSAnYnV0dG9uLWxpa2VfYWN0aXZlJztcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgdGhpcy5idXR0b25MaWtlLmZvckVhY2godGhpcy5ldmVudEhhbmRsZXIpO1xuICB9XG5cbiAgZXZlbnRIYW5kbGVyKGVsKSB7XG4gICAgY29uc3QgdGV4dCA9IGVsLnF1ZXJ5U2VsZWN0b3IodGhpcy50ZXh0U2VsZWN0b3IpO1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5tYWtlVG9nZ2xlQ2xhc3NIYW5kbGVyKHRleHQpKTtcbiAgfVxuXG4gIG1ha2VUb2dnbGVDbGFzc0hhbmRsZXIoZWxlbWVudCkge1xuICAgIGNvbnN0IHRleHQgPSBlbGVtZW50O1xuICAgIHJldHVybiBldmVudCA9PiB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgICAgY29uc3Qgc3BhbiA9IGVsZW1lbnQudGV4dENvbnRlbnQ7XG4gICAgICBjb25zdCBhY3RpdmUgPSB0YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSh0aGlzLnRvZ2dsZVNlbGVjdG9yKTtcblxuICAgICAgaWYgKGFjdGl2ZSkge1xuICAgICAgICB0YXJnZXQuZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQgPSAnZmF2b3JpdGUnO1xuICAgICAgICB0ZXh0LnRleHRDb250ZW50ID0gTnVtYmVyKHNwYW4pICsgMTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnRvZ2dsZVNlbGVjdG9yKTtcbiAgICAgIHRhcmdldC5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudCA9ICdmYXZvcml0ZV9ib3JkZXInO1xuICAgICAgdGV4dC50ZXh0Q29udGVudCA9IE51bWJlcihzcGFuKSAtIDE7XG4gICAgfTtcbiAgfVxuXG59LCAoX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcImV2ZW50SGFuZGxlclwiLCBbYm91bmRNZXRob2RdLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsIFwiZXZlbnRIYW5kbGVyXCIpLCBfY2xhc3MucHJvdG90eXBlKSwgX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcIm1ha2VUb2dnbGVDbGFzc0hhbmRsZXJcIiwgW2JvdW5kTWV0aG9kXSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcIm1ha2VUb2dnbGVDbGFzc0hhbmRsZXJcIiksIF9jbGFzcy5wcm90b3R5cGUpKSwgX2NsYXNzKTtcbmV4cG9ydCBkZWZhdWx0IEJ1dHRvbkxpa2U7IiwiaW1wb3J0IEJ1dHRvbkxpa2UgZnJvbSAnQC9jb21wb25lbnRzL2J1dHRvbi1saWtlL0J1dHRvbkxpa2UnO1xuJCgoKSA9PiB7XG4gIGNvbnN0IGJ1dHRvbkxpa2UgPSBuZXcgQnV0dG9uTGlrZSgpO1xuICBidXR0b25MaWtlLmluaXQoKTtcbn0pOyIsInZhciBfY2xhc3M7XG5cbmZ1bmN0aW9uIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IodGFyZ2V0LCBwcm9wZXJ0eSwgZGVjb3JhdG9ycywgZGVzY3JpcHRvciwgY29udGV4dCkgeyB2YXIgZGVzYyA9IHt9OyBPYmplY3Qua2V5cyhkZXNjcmlwdG9yKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgZGVzY1trZXldID0gZGVzY3JpcHRvcltrZXldOyB9KTsgZGVzYy5lbnVtZXJhYmxlID0gISFkZXNjLmVudW1lcmFibGU7IGRlc2MuY29uZmlndXJhYmxlID0gISFkZXNjLmNvbmZpZ3VyYWJsZTsgaWYgKCd2YWx1ZScgaW4gZGVzYyB8fCBkZXNjLmluaXRpYWxpemVyKSB7IGRlc2Mud3JpdGFibGUgPSB0cnVlOyB9IGRlc2MgPSBkZWNvcmF0b3JzLnNsaWNlKCkucmV2ZXJzZSgpLnJlZHVjZShmdW5jdGlvbiAoZGVzYywgZGVjb3JhdG9yKSB7IHJldHVybiBkZWNvcmF0b3IodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzYykgfHwgZGVzYzsgfSwgZGVzYyk7IGlmIChjb250ZXh0ICYmIGRlc2MuaW5pdGlhbGl6ZXIgIT09IHZvaWQgMCkgeyBkZXNjLnZhbHVlID0gZGVzYy5pbml0aWFsaXplciA/IGRlc2MuaW5pdGlhbGl6ZXIuY2FsbChjb250ZXh0KSA6IHZvaWQgMDsgZGVzYy5pbml0aWFsaXplciA9IHVuZGVmaW5lZDsgfSBpZiAoZGVzYy5pbml0aWFsaXplciA9PT0gdm9pZCAwKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCBkZXNjKTsgZGVzYyA9IG51bGw7IH0gcmV0dXJuIGRlc2M7IH1cblxuaW1wb3J0ICdhaXItZGF0ZXBpY2tlcic7XG5pbXBvcnQgJ2pxdWVyeS1tYXNrLXBsdWdpbic7XG5pbXBvcnQgeyBib3VuZE1ldGhvZCB9IGZyb20gJ2F1dG9iaW5kLWRlY29yYXRvcic7XG5sZXQgRGF0ZVBpY2tlciA9IChfY2xhc3MgPSBjbGFzcyBEYXRlUGlja2VyIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMucHJvcHMgPSB7XG4gICAgICBwb3NpdGlvbjogJ2JvdHRvbSBjZW50ZXInLFxuICAgICAgcmFuZ2U6IHRydWUsXG4gICAgICBuYXZUaXRsZXM6IHtcbiAgICAgICAgZGF5czogJ01NIHl5eXknXG4gICAgICB9LFxuICAgICAgY2xlYXJCdXR0b246IHRydWUsXG4gICAgICBwcmV2SHRtbDogJ2Fycm93X2JhY2snLFxuICAgICAgbmV4dEh0bWw6ICdhcnJvd19mb3J3YXJkJyxcbiAgICAgIG1pbkRhdGU6IG5ldyBEYXRlKCksXG4gICAgICBrZXlib2FyZE5hdjogZmFsc2UsXG4gICAgICBtdWx0aXBsZURhdGVzOiAyLFxuXG4gICAgICBvblNlbGVjdChmb3JtYXR0ZWREYXRlLCBkYXRlLCBwaWNrZXIpIHtcbiAgICAgICAgY29uc3QgZWwgPSBwaWNrZXIuJGVsLnNpYmxpbmdzKG9wdGlvbnMubGFiZWxDbGFzcyk7XG4gICAgICAgIGVsLmNoaWxkcmVuKG9wdGlvbnMuaW5wdXRMZWZ0Q2xhc3MpLnZhbChmb3JtYXR0ZWREYXRlLnNwbGl0KCcsJylbMF0pO1xuICAgICAgICBlbC5jaGlsZHJlbihvcHRpb25zLmlucHV0UmlnaHRDbGFzcykudmFsKGZvcm1hdHRlZERhdGUuc3BsaXQoJywnKVsxXSk7XG4gICAgICB9XG5cbiAgICB9O1xuICAgIHRoaXMucHJvcHNSYW5nZSA9IHtcbiAgICAgIHBvc2l0aW9uOiAnYm90dG9tIGNlbnRlcicsXG4gICAgICByYW5nZTogdHJ1ZSxcbiAgICAgIG5hdlRpdGxlczoge1xuICAgICAgICBkYXlzOiAnTU0geXl5eSdcbiAgICAgIH0sXG4gICAgICBkYXRlRm9ybWF0OiAnZCBNJyxcbiAgICAgIGNsZWFyQnV0dG9uOiB0cnVlLFxuICAgICAgcHJldkh0bWw6ICdhcnJvd19iYWNrJyxcbiAgICAgIG5leHRIdG1sOiAnYXJyb3dfZm9yd2FyZCcsXG4gICAgICBtaW5EYXRlOiBuZXcgRGF0ZSgpLFxuICAgICAga2V5Ym9hcmROYXY6IGZhbHNlLFxuICAgICAgbXVsdGlwbGVEYXRlczogMixcbiAgICAgIG11bHRpcGxlRGF0ZXNTZXBhcmF0b3I6ICcgLSAnXG4gICAgfTtcbiAgICB0aGlzLmRhdGVwaWNrZXJSYW5nZUNsYXNzID0gb3B0aW9ucy5kYXRlcGlja2VyUmFuZ2U7XG4gICAgdGhpcy5kYXRlcGlja2VyQ2xhc3MgPSBvcHRpb25zLmRhdGVwaWNrZXI7XG4gICAgdGhpcy5pbnB1dENsYXNzID0gb3B0aW9ucy5pbnB1dENsYXNzO1xuICAgIHRoaXMuaW5wdXRMZWZ0Q2xhc3MgPSBvcHRpb25zLmlucHV0TGVmdENsYXNzO1xuICAgIHRoaXMuaW5wdXRSaWdodENsYXNzID0gb3B0aW9ucy5pbnB1dFJpZ2h0Q2xhc3M7XG4gICAgdGhpcy5sYWJlbENsYXNzID0gb3B0aW9ucy5sYWJlbENsYXNzO1xuICAgIHRoaXMuYnRuQXBwbHlDbGFzcyA9IG9wdGlvbnMuYnRuQXBwbHlDbGFzcztcbiAgICB0aGlzLmRlZmF1bHRQcm9wcygpO1xuICAgIHRoaXMuZmluZERhdGVwaWNrZXIoKTtcbiAgfVxuXG4gIGRlZmF1bHRQcm9wcygpIHtcbiAgICB0aGlzLnNlbGVjdERhdGUgPSB7fTtcbiAgICB0aGlzLnByZXZEYXkgPSBuZXcgRGF0ZSgpO1xuICAgIHRoaXMuYnRuQ2xhc3MgPSAnLmRhdGVwaWNrZXItLWJ1dHRvbnMnO1xuICB9XG5cbiAgZmluZERhdGVwaWNrZXIoKSB7XG4gICAgdGhpcy4kZGF0ZXBpY2tlclJhbmdlID0gJCh0aGlzLmRhdGVwaWNrZXJSYW5nZUNsYXNzKTtcbiAgICB0aGlzLiRkYXRlcGlja2VyID0gJChgJHt0aGlzLmRhdGVwaWNrZXJDbGFzc30sICR7dGhpcy5kYXRlcGlja2VyUmFuZ2VDbGFzc31gKTtcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgdGhpcy4kZGF0ZXBpY2tlci5lYWNoKHRoaXMuYWRkQ2xhc3NEYXRlUGlja2VyKTtcblxuICAgIGlmICh0aGlzLmxhYmVsQ2xhc3MpIHtcbiAgICAgICQodGhpcy5sYWJlbENsYXNzKS5lYWNoKChfLCBlbCkgPT4ge1xuICAgICAgICBjb25zdCAkZGF0ZVBpY2tlciA9ICQoZWwpLnNpYmxpbmdzKHRoaXMuZGF0ZXBpY2tlckNsYXNzKTtcbiAgICAgICAgJChlbCkuY2xpY2sodGhpcy5tYWtlU2hvd1NlbGVjdExhYmVsKCRkYXRlUGlja2VyKSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnB1dExlZnRDbGFzcykge1xuICAgICAgJCh0aGlzLmlucHV0TGVmdENsYXNzKS5lYWNoKChfLCBlbCkgPT4ge1xuICAgICAgICBjb25zdCAkZGF0ZVBpY2tlciA9ICQoZWwpLmNsb3Nlc3QodGhpcy5sYWJlbENsYXNzKS5zaWJsaW5ncyh0aGlzLmRhdGVwaWNrZXJDbGFzcyk7XG4gICAgICAgICQoZWwpLmNoYW5nZSh0aGlzLm1ha2VDaGFuZ2VTZWxlY3RJbnB1dCgkZGF0ZVBpY2tlciwgZWwpKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlucHV0UmlnaHRDbGFzcykge1xuICAgICAgJCh0aGlzLmlucHV0UmlnaHRDbGFzcykuZWFjaCgoXywgZWwpID0+IHtcbiAgICAgICAgY29uc3QgJGRhdGVQaWNrZXIgPSAkKGVsKS5jbG9zZXN0KHRoaXMubGFiZWxDbGFzcykuc2libGluZ3ModGhpcy5kYXRlcGlja2VyQ2xhc3MpO1xuICAgICAgICAkKGVsKS5jaGFuZ2UodGhpcy5tYWtlQ2hhbmdlU2VsZWN0SW5wdXQoJGRhdGVQaWNrZXIsIGVsKSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLiRkYXRlcGlja2VyUmFuZ2UuZGF0ZXBpY2tlcih0aGlzLnByb3BzUmFuZ2UpO1xuICAgICQodGhpcy5pbnB1dENsYXNzKS5tYXNrKCcwMC4wMC4wMDAwJyk7XG4gICAgdGhpcy4kZGF0ZXBpY2tlclJhbmdlLm1hc2soJzAwIFpaWiAtIDAwIFpaWicsIHtcbiAgICAgIHRyYW5zbGF0aW9uOiB7XG4gICAgICAgIFo6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvW0EtetCQLdGPXS9cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuYnRuQ2xhc3MpIHtcbiAgICAgICQodGhpcy5idG5DbGFzcykuZWFjaCgoXywgZWwpID0+IHtcbiAgICAgICAgaWYgKCEkKGVsKS5maW5kKCcuZGF0ZXBpY2tlci0tYnV0dG9uLWFwcGx5JykubGVuZ3RoKSB7XG4gICAgICAgICAgJChlbCkuZmluZCgnc3Bhbi5kYXRlcGlja2VyLS1idXR0b24nKS5yZW1vdmUoKTtcbiAgICAgICAgICAkKGVsKS5hcHBlbmQoYDxidXR0b24gY2xhc3M9XCJkYXRlcGlja2VyLS1idXR0b25cIiBkYXRhLWFjdGlvbj1cImNsZWFyXCIgdHlwZT1cImJ1dHRvblwiPlxuICAgICAgICAgICAgICAg0J7Rh9C40YHRgtC40YLRjFxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZGF0ZXBpY2tlci0tYnV0dG9uLWFwcGx5XG4gICAgICAgICAgICAke3RoaXMuYnRuQXBwbHlDbGFzcy5yZXBsYWNlKC9eXFwuLywgJycpfVwiIHR5cGU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAg0J/RgNC40LzQtdC90LjRgtGMXG4gICAgICAgICAgICA8L2J1dHRvbj5gKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy4kZGF0ZXBpY2tlci5lYWNoKChpbmQsIGVsKSA9PiB7XG4gICAgICAkKGVsKS5kYXRhKCdkYXRlcGlja2VyJykuJGRhdGVwaWNrZXIuZmluZCh0aGlzLmJ0bkFwcGx5Q2xhc3MpLm9uKCdjbGljaycsIHRoaXMubWFrZUhpZGVEYXRlUGlja2VyKGluZCkpO1xuICAgIH0pO1xuICB9XG5cbiAgbWFrZUNoYW5nZVNlbGVjdElucHV0KCRkYXRlcGlja2VyLCBpbnB1dCkge1xuICAgIGNvbnN0IGVsID0gJGRhdGVwaWNrZXIuZGF0YSgnZGF0ZXBpY2tlcicpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB2YXIgX2VsJHNlbGVjdGVkRGF0ZXMkLCBfZWwkc2VsZWN0ZWREYXRlcyQyO1xuXG4gICAgICBsZXQgW2RheSwgbW9udGgsIHllYXJdID0gJChpbnB1dCkudmFsKCkuc3BsaXQoJy4nKTtcbiAgICAgIG1vbnRoID0gTnVtYmVyKG1vbnRoKSAtIDE7XG4gICAgICB0aGlzLnByZXZEYXkgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KSA+IG5ldyBEYXRlKCkgPyBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KSA6IG5ldyBEYXRlKCk7XG5cbiAgICAgIGlmICgoKF9lbCRzZWxlY3RlZERhdGVzJCA9IGVsLnNlbGVjdGVkRGF0ZXNbMF0pID09PSBudWxsIHx8IF9lbCRzZWxlY3RlZERhdGVzJCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2VsJHNlbGVjdGVkRGF0ZXMkLmdldFRpbWUoKSkgPT09IHRoaXMucHJldkRheS5nZXRUaW1lKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoKChfZWwkc2VsZWN0ZWREYXRlcyQyID0gZWwuc2VsZWN0ZWREYXRlc1sxXSkgPT09IG51bGwgfHwgX2VsJHNlbGVjdGVkRGF0ZXMkMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2VsJHNlbGVjdGVkRGF0ZXMkMi5nZXRUaW1lKCkpID09PSB0aGlzLnByZXZEYXkuZ2V0VGltZSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgZWwuc2VsZWN0RGF0ZSh0aGlzLnByZXZEYXkpO1xuICAgIH07XG4gIH1cblxuICBtYWtlSGlkZURhdGVQaWNrZXIoaW5kKSB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICQodGhpcy4kZGF0ZXBpY2tlcltpbmRdKS5kYXRhKCdkYXRlcGlja2VyJykuaGlkZSgpO1xuICAgIH07XG4gIH1cblxuICBtYWtlU2hvd1NlbGVjdExhYmVsKCRlbCkge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAkZWwuZGF0YSgnZGF0ZXBpY2tlcicpLnNob3coKTtcbiAgICB9O1xuICB9XG5cbiAgYWRkQ2xhc3NEYXRlUGlja2VyKGksIGVsKSB7XG4gICAgJChlbCkuYWRkQ2xhc3MoYGpzLWRhdGUtcGlja2VyLSR7aX1gKTtcbiAgICB0aGlzLnNlbGVjdERhdGVbYGpzLWRhdGUtcGlja2VyLSR7aX1gXSA9ICQoZWwpLmRhdGVwaWNrZXIodGhpcy5wcm9wcyk7XG4gIH1cblxufSwgKF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJtYWtlQ2hhbmdlU2VsZWN0SW5wdXRcIiwgW2JvdW5kTWV0aG9kXSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcIm1ha2VDaGFuZ2VTZWxlY3RJbnB1dFwiKSwgX2NsYXNzLnByb3RvdHlwZSksIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJhZGRDbGFzc0RhdGVQaWNrZXJcIiwgW2JvdW5kTWV0aG9kXSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcImFkZENsYXNzRGF0ZVBpY2tlclwiKSwgX2NsYXNzLnByb3RvdHlwZSkpLCBfY2xhc3MpO1xuZXhwb3J0IHsgRGF0ZVBpY2tlciB9OyIsImltcG9ydCB7IERhdGVQaWNrZXIgfSBmcm9tICdAL2xpYnMvZGF0ZXBpY2tlcic7XG4kKCgpID0+IHtcbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBkYXRlcGlja2VyOiAnLmpzLWRhdGUtcGlja2VyJyxcbiAgICBkYXRlcGlja2VyUmFuZ2U6ICcuanMtZGF0ZS1waWNrZXJfcmFuZ2UnLFxuICAgIGlucHV0Q2xhc3M6ICcuanMtZGF0ZS1waWNrZXJfX2lucHV0JyxcbiAgICBpbnB1dExlZnRDbGFzczogJy5qcy1kYXRlLXBpY2tlcl9faW5wdXRfbGVmdCcsXG4gICAgaW5wdXRSaWdodENsYXNzOiAnLmpzLWRhdGUtcGlja2VyX19pbnB1dF9yaWdodCcsXG4gICAgbGFiZWxDbGFzczogJy5qcy1kYXRlLXBpY2tlcl9fbGFiZWwnLFxuICAgIGJ0bkFwcGx5Q2xhc3M6ICcuanMtZGF0ZXBpY2tlci0tYnV0dG9uLWFwcGx5JyxcbiAgICBpY29uQmFjazogJzxpIGNsYXNzPVwiZGF0ZS1waWNrZXJfX2ljb25cIj5hcnJvd19iYWNrPC9pPicsXG4gICAgaWNvbkZvcndhcmQ6ICc8aSBjbGFzcz1cImRhdGUtcGlja2VyX19pY29uXCI+YXJyb3dfZm9yd2FyZDwvaT4nXG4gIH07XG4gIGNvbnN0IGRhdGVQaWNrID0gbmV3IERhdGVQaWNrZXIob3B0aW9ucyk7XG4gIGRhdGVQaWNrLmluaXQoKTtcbn0pOyIsInZhciBfY2xhc3M7XG5cbmZ1bmN0aW9uIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IodGFyZ2V0LCBwcm9wZXJ0eSwgZGVjb3JhdG9ycywgZGVzY3JpcHRvciwgY29udGV4dCkgeyB2YXIgZGVzYyA9IHt9OyBPYmplY3Qua2V5cyhkZXNjcmlwdG9yKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgZGVzY1trZXldID0gZGVzY3JpcHRvcltrZXldOyB9KTsgZGVzYy5lbnVtZXJhYmxlID0gISFkZXNjLmVudW1lcmFibGU7IGRlc2MuY29uZmlndXJhYmxlID0gISFkZXNjLmNvbmZpZ3VyYWJsZTsgaWYgKCd2YWx1ZScgaW4gZGVzYyB8fCBkZXNjLmluaXRpYWxpemVyKSB7IGRlc2Mud3JpdGFibGUgPSB0cnVlOyB9IGRlc2MgPSBkZWNvcmF0b3JzLnNsaWNlKCkucmV2ZXJzZSgpLnJlZHVjZShmdW5jdGlvbiAoZGVzYywgZGVjb3JhdG9yKSB7IHJldHVybiBkZWNvcmF0b3IodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzYykgfHwgZGVzYzsgfSwgZGVzYyk7IGlmIChjb250ZXh0ICYmIGRlc2MuaW5pdGlhbGl6ZXIgIT09IHZvaWQgMCkgeyBkZXNjLnZhbHVlID0gZGVzYy5pbml0aWFsaXplciA/IGRlc2MuaW5pdGlhbGl6ZXIuY2FsbChjb250ZXh0KSA6IHZvaWQgMDsgZGVzYy5pbml0aWFsaXplciA9IHVuZGVmaW5lZDsgfSBpZiAoZGVzYy5pbml0aWFsaXplciA9PT0gdm9pZCAwKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCBkZXNjKTsgZGVzYyA9IG51bGw7IH0gcmV0dXJuIGRlc2M7IH1cblxuaW1wb3J0IHsgYm91bmRNZXRob2QgfSBmcm9tICdhdXRvYmluZC1kZWNvcmF0b3InO1xubGV0IERyb3BEb3duID0gKF9jbGFzcyA9IGNsYXNzIERyb3BEb3duIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zZXREZWZhdWx0UHJvcHMoKTtcbiAgICB0aGlzLnNldERlZmF1bHRDbGFzc05hbWUoKTtcbiAgfVxuXG4gIHNldERlZmF1bHRQcm9wcygpIHtcbiAgICB0aGlzLmNoaWxkcmVuID0ge307XG4gICAgdGhpcy5kcm9wRG93biA9IHt9O1xuICB9XG5cbiAgc2V0RGVmYXVsdENsYXNzTmFtZSgpIHtcbiAgICB0aGlzLmRyb3BEb3duQ2xhc3MgPSAnLmpzLWRyb3AtZG93bl9fc2VsZWN0JztcbiAgICB0aGlzLmRyb3BEb3duRXh0ZW5kQ2xhc3MgPSAnLmpzLWRyb3AtZG93bl9fc2VsZWN0X2V4dGVuZGVkJztcbiAgICB0aGlzLmNvbnRyb2xQYW5lbENsYXNzID0gJy5qcy1kcm9wLWRvd25fX2NvbnRyb2wtcGFuZWwnO1xuICAgIHRoaXMuYnV0dG9uQ2xhc3MgPSAnLmpzLWRyb3AtZG93bl9fYnV0dG9uJztcbiAgICB0aGlzLmRyb3BJdGVtc0NsYXNzID0gJy5qcy1kcm9wLWRvd25fX2l0ZW1zJztcbiAgICB0aGlzLmRyb3BJdGVtQ2xhc3MgPSAnLmpzLWRyb3AtZG93bl9faXRlbSc7XG4gICAgdGhpcy5pdGVtQ3VycmVudENsYXNzID0gJy5qcy1kcm9wLWRvd25fX2l0ZW0tY3VycmVudCc7XG4gICAgdGhpcy5idG5TdWJtaXRDbGFzcyA9ICcuanMtZHJvcC1kb3duX19zdWJtaXQtYnV0dG9uJztcbiAgICB0aGlzLmJ0bk1pbnVzQ2xhc3MgPSAnLmpzLWJ0bl9taW51cyc7XG4gICAgdGhpcy5idG5SZXNldENsYXNzID0gJy5qcy1kcm9wLWRvd25fX3Jlc2V0LWJ1dHRvbic7XG4gICAgdGhpcy5zcGFuQ2xhc3MgPSAnLmpzLWRyb3AtZG93bl9fc3Bhbic7XG4gICAgdGhpcy50ZXh0Q3VycmVudENsYXNzID0gJy5qcy1kcm9wLWRvd25fX3RleHQtY3VycmVudCc7XG4gICAgdGhpcy5pdGVtU3BhbkNsYXNzID0gJy5qcy1kcm9wLWRvd25fX2l0ZW0tc3Bhbic7XG4gICAgdGhpcy5idXR0b25EaXNhYmxlQ2xhc3MgPSAnZHJvcC1kb3duX19idXR0b25fZGlzYWJsZWQnO1xuICAgIHRoaXMudG9nZ2xlQ2xhc3MgPSAnZHJvcC1kb3duX19zZWxlY3RfYWN0aXZlJztcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgJCh0aGlzLmRyb3BEb3duQ2xhc3MpLmVhY2goKGksIGVsKSA9PiB7XG4gICAgICBjb25zdCBjbGFzc05hbWUgPSBgLmpzLWRwZF9zbHQtJHtpfWA7XG4gICAgICBjb25zdCBuYW1lID0gYGpzLWRwZF9zbHQtJHtpfWA7XG4gICAgICB0aGlzLmRyb3BEb3duW2NsYXNzTmFtZV0gPSAkKGVsKTtcbiAgICAgIGVsLmNsYXNzTGlzdC5hZGQobmFtZSk7XG4gICAgICB0aGlzLnNob3dEcm9wSXRlbXMoY2xhc3NOYW1lKTtcbiAgICAgIHRoaXMuc2xpZGVEcm9wKGNsYXNzTmFtZSk7XG4gICAgICB0aGlzLmNoaWxkcmVuQ3VycmVudFZhbChjbGFzc05hbWUpO1xuICAgICAgdGhpcy5hZGRIYW5kbGVCdXR0b25DbGljayhjbGFzc05hbWUpO1xuICAgIH0pO1xuICAgICQodGhpcy5kcm9wRG93bkV4dGVuZENsYXNzKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgICAgY29uc3QgY2xhc3NOYW1lID0gYC5qcy1kcF9leHQtJHtpfWA7XG4gICAgICBjb25zdCBuYW1lID0gYGpzLWRwX2V4dC0ke2l9YDtcbiAgICAgIHRoaXMuZHJvcERvd25bY2xhc3NOYW1lXSA9ICQoZWwpO1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZChuYW1lKTtcbiAgICAgIHRoaXMuc2hvd0Ryb3BJdGVtcyhjbGFzc05hbWUpO1xuICAgICAgdGhpcy5zbGlkZURyb3AoY2xhc3NOYW1lKTtcbiAgICAgIHRoaXMuY2hpbGRyZW5DdXJyZW50VmFsKGNsYXNzTmFtZSk7XG4gICAgICB0aGlzLmFjdGlvbkRyb3BEb3duRXh0ZW5kZWQoY2xhc3NOYW1lKTtcbiAgICAgIHRoaXMuYnV0dG9uQWN0aW9uKGNsYXNzTmFtZSk7XG4gICAgfSk7XG4gIH1cblxuICBzaG93RHJvcEl0ZW1zKHNlbGVjdG9yKSB7XG4gICAgaWYgKCEkKHNlbGVjdG9yKS5oYXNDbGFzcyh0aGlzLnRvZ2dsZUNsYXNzKSkge1xuICAgICAgJChgJHtzZWxlY3Rvcn0gJHt0aGlzLmRyb3BJdGVtc0NsYXNzfWApLnNsaWRlVG9nZ2xlKDApO1xuICAgIH1cbiAgfVxuXG4gIHNsaWRlRHJvcChzZWxlY3Rvcikge1xuICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLmRyb3BEb3duW3NlbGVjdG9yXS5jaGlsZHJlbihgJHt0aGlzLml0ZW1DdXJyZW50Q2xhc3N9YCk7XG4gICAgY29uc3QgYnRuID0gdGhpcy5kcm9wRG93bltzZWxlY3Rvcl0uZmluZChgJHt0aGlzLmJ0blN1Ym1pdENsYXNzfWApO1xuICAgIGN1cnJlbnQub24oJ2NsaWNrJywgdGhpcy5tYWtlVG9nZ2xlRHJvcERvd25IYW5kbGVyKHNlbGVjdG9yKSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm1ha2VDbG9zZURyb3BEb3duSGFuZGxlcihzZWxlY3RvcikpO1xuXG4gICAgaWYgKGJ0bi5sZW5ndGgpIHtcbiAgICAgIGJ0bi5vbignY2xpY2snLCB0aGlzLm1ha2VUb2dnbGVEcm9wRG93bkhhbmRsZXIoc2VsZWN0b3IpKTtcbiAgICB9XG4gIH1cblxuICBtYWtlQ2xvc2VEcm9wRG93bkhhbmRsZXIoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gZXZlbnQgPT4ge1xuICAgICAgY29uc3QgaXNIYXZlID0gISFldmVudC50YXJnZXQuY2xvc2VzdChzZWxlY3Rvcik7XG5cbiAgICAgIGlmICghaXNIYXZlKSB7XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5kcm9wRG93bltzZWxlY3Rvcl0uZmluZChgJHt0aGlzLmRyb3BJdGVtc0NsYXNzfWApO1xuICAgICAgICBpdGVtcy5zbGlkZVVwKDMwMCk7XG4gICAgICAgIHRoaXMuZHJvcERvd25bc2VsZWN0b3JdLnJlbW92ZUNsYXNzKHRoaXMudG9nZ2xlQ2xhc3MpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBtYWtlVG9nZ2xlRHJvcERvd25IYW5kbGVyKHNlbGVjdG9yKSB7XG4gICAgY29uc3QgaXRlbXMgPSB0aGlzLmRyb3BEb3duW3NlbGVjdG9yXS5maW5kKGAke3RoaXMuZHJvcEl0ZW1zQ2xhc3N9YCk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGl0ZW1zLnNsaWRlVG9nZ2xlKDMwMCk7XG4gICAgICB0aGlzLmRyb3BEb3duW3NlbGVjdG9yXS50b2dnbGVDbGFzcyh0aGlzLnRvZ2dsZUNsYXNzKTtcbiAgICB9O1xuICB9XG5cbiAgYWRkSGFuZGxlQnV0dG9uQ2xpY2soc2VsZWN0b3IpIHtcbiAgICB0aGlzLmRyb3BEb3duW3NlbGVjdG9yXS5maW5kKHRoaXMuY29udHJvbFBhbmVsQ2xhc3MpLmVhY2goKGksIGVsKSA9PiB7XG4gICAgICAkKGVsKS5jaGlsZHJlbih0aGlzLmJ1dHRvbkNsYXNzKS5vbignY2xpY2snLCB0aGlzLm1ha2VPcGVyYXRpb25TdW1IYW5kbGVyKHtcbiAgICAgICAgc2VsZWN0b3IsXG4gICAgICAgIGksXG4gICAgICAgIGVsXG4gICAgICB9LCB0aGlzLnRleHRDdXJyZW50TmV3KSk7XG4gICAgfSk7XG4gIH1cblxuICBhY3Rpb25Ecm9wRG93bkV4dGVuZGVkKHNlbGVjdG9yKSB7XG4gICAgY29uc3QgJGJ0blJlc2V0ID0gdGhpcy5kcm9wRG93bltzZWxlY3Rvcl0uZmluZCh0aGlzLmJ0blJlc2V0Q2xhc3MpO1xuICAgIHRoaXMuZHJvcERvd25bc2VsZWN0b3JdLmZpbmQodGhpcy5jb250cm9sUGFuZWxDbGFzcykuZWFjaCgoaSwgZWwpID0+IHtcbiAgICAgICQoZWwpLmNoaWxkcmVuKHRoaXMuYnV0dG9uQ2xhc3MpLm9uKCdjbGljaycsIHRoaXMubWFrZU9wZXJhdGlvblN1bUhhbmRsZXIoe1xuICAgICAgICBzZWxlY3RvcixcbiAgICAgICAgaSxcbiAgICAgICAgZWxcbiAgICAgIH0sIHRoaXMudGV4dE1vZGlmeSkpO1xuICAgICAgRHJvcERvd24uYnRuSGlkZSgkYnRuUmVzZXQsIHRoaXMuY2hpbGRyZW5bc2VsZWN0b3JdW2ldKTtcbiAgICB9KTtcbiAgfVxuXG4gIG1ha2VPcGVyYXRpb25TdW1IYW5kbGVyKG9wdGlvbnMsIGNhbGxCYWNrKSB7XG4gICAgY29uc3Qge1xuICAgICAgc2VsZWN0b3IsXG4gICAgICBpLFxuICAgICAgZWxcbiAgICB9ID0gb3B0aW9ucztcbiAgICBjb25zdCAkc3BhbiA9ICQoZWwpLmZpbmQodGhpcy5zcGFuQ2xhc3MpO1xuICAgIGNvbnN0ICRidG5NaW51cyA9ICQoZWwpLmNoaWxkcmVuKHRoaXMuYnRuTWludXNDbGFzcyk7XG4gICAgdGhpcy5kaXNhYmxlQnV0dG9uKCRidG5NaW51cywgJHNwYW4pO1xuICAgIHJldHVybiBldmVudCA9PiB7XG4gICAgICBsZXQgaXRlbSA9IHRoaXMuY2hpbGRyZW5bc2VsZWN0b3JdW2ldO1xuICAgICAgY29uc3Qgc3VtID0gZXZlbnQuY3VycmVudFRhcmdldC50ZXh0Q29udGVudDtcbiAgICAgIGl0ZW0gKz0gTnVtYmVyKGAke3N1bX0xYCk7XG5cbiAgICAgIGlmIChpdGVtIDw9IDApIHtcbiAgICAgICAgaXRlbSA9IDA7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY2hpbGRyZW5bc2VsZWN0b3JdW2ldID0gaXRlbTtcbiAgICAgICRzcGFuLnRleHQoaXRlbSk7XG4gICAgICBjYWxsQmFjayhzZWxlY3Rvcik7XG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oJGJ0bk1pbnVzLCAkc3Bhbik7XG4gICAgfTtcbiAgfVxuXG4gIGRpc2FibGVCdXR0b24oJGJ0biwgJHNwYW4pIHtcbiAgICBpZiAoJHNwYW4udGV4dCgpIDw9IDApIHtcbiAgICAgICRidG4uYWRkQ2xhc3ModGhpcy5idXR0b25EaXNhYmxlQ2xhc3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkYnRuLnJlbW92ZUNsYXNzKHRoaXMuYnV0dG9uRGlzYWJsZUNsYXNzKTtcbiAgICB9XG4gIH1cblxuICBidXR0b25BY3Rpb24oc2VsZWN0b3IpIHtcbiAgICB0aGlzLmRyb3BEb3duW3NlbGVjdG9yXS5maW5kKHRoaXMuYnRuUmVzZXRDbGFzcykub24oJ2NsaWNrJywgdGhpcy5tYWtlUmVzZXRIYW5kbGVyKHNlbGVjdG9yKSk7XG4gIH1cblxuICBtYWtlUmVzZXRIYW5kbGVyKHNlbGVjdG9yKSB7XG4gICAgY29uc3QgJGN1cnJlbnRUZXh0ID0gdGhpcy5kcm9wRG93bltzZWxlY3Rvcl0uZmluZCh0aGlzLnRleHRDdXJyZW50Q2xhc3MpO1xuICAgIGNvbnN0ICRzcGFuID0gdGhpcy5kcm9wRG93bltzZWxlY3Rvcl0uZmluZCh0aGlzLnNwYW5DbGFzcyk7XG4gICAgY29uc3QgJGJ0bk1pbnVzID0gdGhpcy5kcm9wRG93bltzZWxlY3Rvcl0uZmluZCh0aGlzLmJ0bk1pbnVzQ2xhc3MpO1xuICAgIHJldHVybiBldmVudCA9PiB7XG4gICAgICAkY3VycmVudFRleHQudGV4dCgn0KHQutC+0LvRjNC60L4g0LPQvtGB0YLQtdC5Jyk7XG4gICAgICAkc3Bhbi50ZXh0KDApO1xuICAgICAgJGJ0bk1pbnVzLmFkZENsYXNzKHRoaXMuYnV0dG9uRGlzYWJsZUNsYXNzKTtcbiAgICAgIHRoaXMuY2hpbGRyZW5bc2VsZWN0b3JdLmZpbGwoMCk7XG4gICAgICBEcm9wRG93bi5idG5IaWRlKCQoZXZlbnQuY3VycmVudFRhcmdldCksIDApO1xuICAgIH07XG4gIH1cblxuICBkcm9wSXRlbShlbCkge1xuICAgIHJldHVybiB7XG4gICAgICBjb3VudDogJChlbCkuZmluZCh0aGlzLnNwYW5DbGFzcykudGV4dCgpLFxuICAgICAgbmFtZTogJChlbCkuY2hpbGRyZW4odGhpcy5pdGVtU3BhbkNsYXNzKS50ZXh0KClcbiAgICB9O1xuICB9XG5cbiAgdGV4dEN1cnJlbnROZXcoc2VsZWN0b3IpIHtcbiAgICBsZXQgdGV4dEN1cnJlbnQgPSAnJztcbiAgICBsZXQgY291bnRFbGVtID0gMDtcbiAgICB0aGlzLmRyb3BEb3duW3NlbGVjdG9yXS5maW5kKHRoaXMuZHJvcEl0ZW1DbGFzcykuZWFjaCgoXywgZWwpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgY291bnQsXG4gICAgICAgIG5hbWU6IG5hbWVFbGVtXG4gICAgICB9ID0gdGhpcy5kcm9wSXRlbShlbCk7XG5cbiAgICAgIGlmIChjb3VudCA+IDApIHtcbiAgICAgICAgY291bnRFbGVtICs9IDE7XG4gICAgICAgIHRleHRDdXJyZW50ID0gYCR7RHJvcERvd24uZ2V0VGV4dCh0ZXh0Q3VycmVudCwgY291bnRFbGVtKX0gJHtjb3VudH0gJHtuYW1lRWxlbX1gO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuZHJvcERvd25bc2VsZWN0b3JdLmZpbmQodGhpcy50ZXh0Q3VycmVudENsYXNzKS50ZXh0KHRleHRDdXJyZW50KTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRUZXh0KHRleHRDdXJyZW50LCBjb3VudEVsZW0pIHtcbiAgICByZXR1cm4gYCR7dGV4dEN1cnJlbnR9JHtjb3VudEVsZW0gPj0gMiA/ICcsICcgOiAnICd9YDtcbiAgfVxuXG4gIHRleHRNb2RpZnkoc2VsZWN0b3IpIHtcbiAgICBsZXQgdGV4dEN1cnJlbnQgPSAn0KHQutC+0LvRjNC60L4g0LPQvtGB0YLQtdC5JztcbiAgICBsZXQgYWR1bHRzID0gMDsgLy8g0YHRh9C10YLRh9C40Log0LLQt9GA0L7RgdC70YvRhVxuXG4gICAgbGV0IGNoaWxkID0gMDsgLy8g0YHRh9C10YLRh9C40Log0LzQu9Cw0LTQtdC90YbQtdCyXG5cbiAgICBjb25zdCAkYnRuUmVzZXQgPSB0aGlzLmRyb3BEb3duW3NlbGVjdG9yXS5maW5kKHRoaXMuYnRuUmVzZXRDbGFzcyk7XG4gICAgdGhpcy5kcm9wRG93bltzZWxlY3Rvcl0uZmluZChgJHt0aGlzLmRyb3BJdGVtQ2xhc3N9YCkuZWFjaCgoXywgZWwpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgY291bnQsXG4gICAgICAgIG5hbWVcbiAgICAgIH0gPSB0aGlzLmRyb3BJdGVtKGVsKTtcblxuICAgICAgaWYgKG5hbWUgPT09ICfQvNC70LDQtNC10L3RhtGLJykge1xuICAgICAgICBjaGlsZCA9IGNvdW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWR1bHRzICs9ICtjb3VudDtcbiAgICAgIH1cblxuICAgICAgdGV4dEN1cnJlbnQgPSBEcm9wRG93bi5jb3VudEFkdWx0KGFkdWx0cywgY2hpbGQpICsgRHJvcERvd24uY291bnRDaGlsZChjaGlsZCk7XG4gICAgfSk7XG4gICAgdGhpcy5kcm9wRG93bltzZWxlY3Rvcl0uZmluZCh0aGlzLnRleHRDdXJyZW50Q2xhc3MpLnRleHQodGV4dEN1cnJlbnQpO1xuICAgIERyb3BEb3duLmJ0bkhpZGUoJGJ0blJlc2V0LCBhZHVsdHMsIGNoaWxkKTtcbiAgfVxuXG4gIHN0YXRpYyBidG5IaWRlKCRidG5SZXNldCwgYWR1bHRzLCBjaGlsZCA9IDApIHtcbiAgICBpZiAoYWR1bHRzIDw9IDAgJiYgY2hpbGQgPD0gMCkge1xuICAgICAgJGJ0blJlc2V0LmNzcygnb3BhY2l0eScsIDApO1xuICAgIH0gZWxzZSB7XG4gICAgICAkYnRuUmVzZXQuY3NzKCdvcGFjaXR5JywgMSk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGNvdW50QWR1bHQoY291bnQsIGNoaWxkKSB7XG4gICAgY29uc3QgcyA9IGNoaWxkID4gMCA/ICcsICcgOiAnICc7XG5cbiAgICBzd2l0Y2ggKHRydWUpIHtcbiAgICAgIGNhc2UgY291bnQgPD0gMDpcbiAgICAgICAgcmV0dXJuICcgJztcblxuICAgICAgY2FzZSBjb3VudCA8PSAxOlxuICAgICAgICByZXR1cm4gYCR7Y291bnR9INCz0L7RgdGC0Ywke3N9YDtcblxuICAgICAgY2FzZSBjb3VudCA8PSA0OlxuICAgICAgICByZXR1cm4gYCR7Y291bnR9INCz0L7RgdGC0Y8ke3N9YDtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGAke2NvdW50fSDQs9C+0YHRgtC10Lkke3N9YDtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgY291bnRDaGlsZChjb3VudCkge1xuICAgIHN3aXRjaCAodHJ1ZSkge1xuICAgICAgY2FzZSBjb3VudCA8PSAwOlxuICAgICAgICByZXR1cm4gJyc7XG5cbiAgICAgIGNhc2UgY291bnQgPD0gMTpcbiAgICAgICAgcmV0dXJuIGAke2NvdW50fSDQvNC70LDQtNC10L3QtdGGYDtcblxuICAgICAgY2FzZSBjb3VudCA8PSA0OlxuICAgICAgICByZXR1cm4gYCR7Y291bnR9INC80LvQsNC00LXQvdGG0LBgO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gYCR7Y291bnR9INC80LvQsNC00LXQvdGG0LXQsmA7XG4gICAgfVxuICB9XG5cbiAgY2hpbGRyZW5DdXJyZW50VmFsKGNsYXNzTmFtZSkge1xuICAgIHRoaXMuY2hpbGRyZW5bY2xhc3NOYW1lXSA9IFtdO1xuICAgICQoYCR7Y2xhc3NOYW1lfSAke3RoaXMuc3BhbkNsYXNzfWApLmVhY2goKGksIGVsKSA9PiB7XG4gICAgICB0aGlzLmNoaWxkcmVuW2NsYXNzTmFtZV1baV0gPSArZWwudGV4dENvbnRlbnQ7XG4gICAgfSk7XG4gIH1cblxufSwgKF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJtYWtlQ2xvc2VEcm9wRG93bkhhbmRsZXJcIiwgW2JvdW5kTWV0aG9kXSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcIm1ha2VDbG9zZURyb3BEb3duSGFuZGxlclwiKSwgX2NsYXNzLnByb3RvdHlwZSksIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJ0ZXh0Q3VycmVudE5ld1wiLCBbYm91bmRNZXRob2RdLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsIFwidGV4dEN1cnJlbnROZXdcIiksIF9jbGFzcy5wcm90b3R5cGUpLCBfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsIFwidGV4dE1vZGlmeVwiLCBbYm91bmRNZXRob2RdLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsIFwidGV4dE1vZGlmeVwiKSwgX2NsYXNzLnByb3RvdHlwZSkpLCBfY2xhc3MpO1xuZXhwb3J0IGRlZmF1bHQgRHJvcERvd247IiwiaW1wb3J0IERyb3BEb3duIGZyb20gJ0AvY29tcG9uZW50cy9kcm9wLWRvd24vRHJvcERvd24nO1xuJCgoKSA9PiB7XG4gIGNvbnN0IGRyb3Bkb3duID0gbmV3IERyb3BEb3duKCk7XG4gIGRyb3Bkb3duLmluaXQoKTtcbn0pOyIsInZhciBfY2xhc3M7XG5cbmZ1bmN0aW9uIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IodGFyZ2V0LCBwcm9wZXJ0eSwgZGVjb3JhdG9ycywgZGVzY3JpcHRvciwgY29udGV4dCkgeyB2YXIgZGVzYyA9IHt9OyBPYmplY3Qua2V5cyhkZXNjcmlwdG9yKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgZGVzY1trZXldID0gZGVzY3JpcHRvcltrZXldOyB9KTsgZGVzYy5lbnVtZXJhYmxlID0gISFkZXNjLmVudW1lcmFibGU7IGRlc2MuY29uZmlndXJhYmxlID0gISFkZXNjLmNvbmZpZ3VyYWJsZTsgaWYgKCd2YWx1ZScgaW4gZGVzYyB8fCBkZXNjLmluaXRpYWxpemVyKSB7IGRlc2Mud3JpdGFibGUgPSB0cnVlOyB9IGRlc2MgPSBkZWNvcmF0b3JzLnNsaWNlKCkucmV2ZXJzZSgpLnJlZHVjZShmdW5jdGlvbiAoZGVzYywgZGVjb3JhdG9yKSB7IHJldHVybiBkZWNvcmF0b3IodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzYykgfHwgZGVzYzsgfSwgZGVzYyk7IGlmIChjb250ZXh0ICYmIGRlc2MuaW5pdGlhbGl6ZXIgIT09IHZvaWQgMCkgeyBkZXNjLnZhbHVlID0gZGVzYy5pbml0aWFsaXplciA/IGRlc2MuaW5pdGlhbGl6ZXIuY2FsbChjb250ZXh0KSA6IHZvaWQgMDsgZGVzYy5pbml0aWFsaXplciA9IHVuZGVmaW5lZDsgfSBpZiAoZGVzYy5pbml0aWFsaXplciA9PT0gdm9pZCAwKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCBkZXNjKTsgZGVzYyA9IG51bGw7IH0gcmV0dXJuIGRlc2M7IH1cblxuaW1wb3J0IHsgYm91bmRNZXRob2QgfSBmcm9tICdhdXRvYmluZC1kZWNvcmF0b3InO1xubGV0IENhcmRSb29tID0gKF9jbGFzcyA9IGNsYXNzIENhcmRSb29tIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5maW5kQ2FyZFJvb20oKTtcbiAgICB0aGlzLmZpbmRJbnB1dCgpO1xuICAgIHRoaXMuc2V0RGVmYXVsdENsYXNzTmFtZSgpO1xuICB9XG5cbiAgZmluZENhcmRSb29tKCkge1xuICAgIHRoaXMuJGNhcmQgPSAkKCcuanMtY2FyZC1yb29tJyk7XG4gIH1cblxuICBmaW5kSW5wdXQoKSB7XG4gICAgdGhpcy4kaW5wdXQgPSB0aGlzLiRjYXJkLmZpbmQoJy5qcy1kYXRlLXBpY2tlcicpO1xuICB9XG5cbiAgc2V0RGVmYXVsdENsYXNzTmFtZSgpIHtcbiAgICB0aGlzLmJ1dHRvbkFwcGx5Q2xhc3MgPSAnLmpzLWRhdGVwaWNrZXItLWJ1dHRvbi1hcHBseSc7XG4gICAgdGhpcy5yb29tSW5mb0NsYXNzID0gJy5qcy1jYXJkLXJvb21fX2luZm8nO1xuICAgIHRoaXMucm9vbURhdGFDbGFzcyA9ICcuanMtY2FyZC1yb29tX19kYXRhJztcbiAgICB0aGlzLnRvdGFsQW1vdW50Q2xhc3MgPSAnLmpzLWNhcmQtcm9vbV9fdG90YWwtYW1vdW50JztcbiAgICB0aGlzLnNhbGVDbGFzcyA9ICcuanMtY2FyZC1yb29tX19zYWxlJztcbiAgICB0aGlzLnByaWNlRGF5Q2xhc3MgPSAnLmpzLWNhcmQtcm9vbV9fcHJpY2UtZGF5JztcbiAgICB0aGlzLnRvdGFsUHJpY2VDbGFzcyA9ICcuanMtY2FyZC1yb29tX190b3RhbC1wcmljZSc7XG4gICAgdGhpcy5hZGRpdGlvbmFsQ2xhc3MgPSAnLmpzLWNhcmQtcm9vbV9fYWRkaXRpb25hbCc7XG4gICAgdGhpcy5pbmZvU3VtQ2xhc3MgPSAnLmpzLWNhcmQtcm9vbV9faW5mby1zdW0nO1xuICAgIHRoaXMuaW5mb05hbWVDbGFzcyA9ICcuanMtY2FyZC1yb29tX19pbmZvLW5hbWUnO1xuICAgIHRoaXMucHJpY2VOdW1iZXJDbGFzcyA9ICcuanMtY2FyZC1yb29tXyBfcHJpY2UtbnVtYmVyJztcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgY29uc3QgYnV0dG9ucyA9IFtdO1xuICAgIHRoaXMuJGlucHV0LmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICBidXR0b25zLnB1c2goJChlbCkuZGF0YSgnZGF0ZXBpY2tlcicpLiRkYXRlcGlja2VyLmZpbmQodGhpcy5idXR0b25BcHBseUNsYXNzKSk7XG4gICAgfSk7XG4gICAgYnV0dG9ucy5mb3JFYWNoKHRoaXMuaGFuZGxlQnV0dG9uQXBwbHkpO1xuICAgICQodGhpcy5pbmZvU3VtQ2xhc3MpLnRleHQoKF8sIGVsKSA9PiBDYXJkUm9vbS5yZXBsYWNlKGVsKSk7XG4gICAgJCh0aGlzLmluZm9OYW1lQ2xhc3MpLnRleHQoKF8sIGVsKSA9PiBDYXJkUm9vbS5yZXBsYWNlKGVsKSk7XG4gICAgJCh0aGlzLnRvdGFsUHJpY2VDbGFzcykudGV4dCgoXywgZWwpID0+IENhcmRSb29tLnJlcGxhY2UoZWwpKTtcbiAgICAkKHRoaXMucHJpY2VOdW1iZXJDbGFzcykudGV4dCgoXywgZWwpID0+IENhcmRSb29tLnJlcGxhY2UoZWwpKTtcbiAgfVxuXG4gIGhhbmRsZUJ1dHRvbkFwcGx5KGVsLCBpbmQpIHtcbiAgICBjb25zdCAkY3VycmVudERQID0gJCh0aGlzLiRpbnB1dFtpbmRdKTtcbiAgICBjb25zdCAkYmxvY2sgPSAkY3VycmVudERQLmNsb3Nlc3QodGhpcy5yb29tRGF0YUNsYXNzKS5zaWJsaW5ncyh0aGlzLnJvb21JbmZvQ2xhc3MpO1xuICAgIGNvbnN0ICRwYXkgPSAkYmxvY2suZmluZCh0aGlzLnRvdGFsQW1vdW50Q2xhc3MpO1xuICAgIGNvbnN0ICRkb3AgPSAkYmxvY2suZmluZCh0aGlzLmFkZGl0aW9uYWxDbGFzcyk7XG4gICAgY29uc3QgJHNhbGUgPSAkYmxvY2suZmluZCh0aGlzLnNhbGVDbGFzcyk7XG4gICAgY29uc3QgJHByaWNlID0gJGJsb2NrLmZpbmQodGhpcy5wcmljZURheUNsYXNzKTtcbiAgICBjb25zdCAkcmVzdWx0U3VtID0gJGJsb2NrLmZpbmQodGhpcy50b3RhbFByaWNlQ2xhc3MpO1xuICAgICQoZWwpLm9uKCdjbGljaycsIENhcmRSb29tLm1ha2VFdmVudEhhbmRsZXIoe1xuICAgICAgJGN1cnJlbnREUCxcbiAgICAgICRwYXksXG4gICAgICAkZG9wLFxuICAgICAgJHNhbGUsXG4gICAgICAkcHJpY2UsXG4gICAgICAkcmVzdWx0U3VtXG4gICAgfSkpO1xuICB9XG5cbiAgc3RhdGljIG1ha2VFdmVudEhhbmRsZXIob3B0aW9ucykge1xuICAgIGNvbnN0IHtcbiAgICAgICRjdXJyZW50RFAsXG4gICAgICAkcGF5LFxuICAgICAgJGRvcCxcbiAgICAgICRzYWxlLFxuICAgICAgJHByaWNlLFxuICAgICAgJHJlc3VsdFN1bVxuICAgIH0gPSBvcHRpb25zO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjb25zdCBbdG8sIGZyb21dID0gJGN1cnJlbnREUC5kYXRhKCdkYXRlcGlja2VyJykuc2VsZWN0ZWREYXRlcztcbiAgICAgIGxldCBkYXRlID0gTWF0aC5jZWlsKChmcm9tIC0gdG8pIC8gMTAwMCAvIDYwIC8gNjAgLyAyNCk7XG5cbiAgICAgIGlmICghZGF0ZSkge1xuICAgICAgICBkYXRlID0gMTtcbiAgICAgIH1cblxuICAgICAgbGV0IHBheSA9IENhcmRSb29tLnByaWNlUmVnKCRwYXkpO1xuICAgICAgbGV0IGRvcCA9IENhcmRSb29tLnByaWNlUmVnKCRkb3ApO1xuICAgICAgbGV0IHNhbGUgPSBDYXJkUm9vbS5wcmljZVJlZygkc2FsZSk7XG4gICAgICAkcGF5LnRleHQoYCR7cGF5fSDigr0gICogJHtkYXRlfSDRgdGD0YLQvtC6YCk7XG4gICAgICBwYXkgPSBwYXJzZUludChwYXlbMF0ucmVwbGFjZSgvXFxzKy9nLCAnJyksIDEwKSAqIGRhdGU7XG4gICAgICBkb3AgPSBwYXJzZUludChkb3BbMF0ucmVwbGFjZSgvXFxzKy9nLCAnJyksIDEwKTtcbiAgICAgIHNhbGUgPSBwYXJzZUludChzYWxlWzBdLnJlcGxhY2UoL1xccysvZywgJycpLCAxMCk7XG4gICAgICAkcHJpY2UudGV4dChgJHtDYXJkUm9vbS5yZXBsYWNlKHBheSl9IOKCvWApO1xuICAgICAgJHJlc3VsdFN1bS50ZXh0KGAke0NhcmRSb29tLnJlcGxhY2UoK3BheSArIGRvcCAtIHNhbGUpfeKCvWApO1xuICAgIH07XG4gIH1cblxuICBzdGF0aWMgcHJpY2VSZWcoJGpxKSB7XG4gICAgcmV0dXJuICRqcS50ZXh0KCkubWF0Y2goL1tcXGQrXFxzP10rKD894oK9KS9tKTtcbiAgfVxuXG4gIHN0YXRpYyByZXBsYWNlKGVsKSB7XG4gICAgcmV0dXJuIGVsLnRvU3RyaW5nKCkucmVwbGFjZSgvKFxcZHsxLDN9KD89KD86XFxkXFxkXFxkKSsoPyFcXGQpKSkvZywgJyQxICcpO1xuICB9XG5cbn0sIChfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsIFwiaGFuZGxlQnV0dG9uQXBwbHlcIiwgW2JvdW5kTWV0aG9kXSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcImhhbmRsZUJ1dHRvbkFwcGx5XCIpLCBfY2xhc3MucHJvdG90eXBlKSwgX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcihfY2xhc3MsIFwibWFrZUV2ZW50SGFuZGxlclwiLCBbYm91bmRNZXRob2RdLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKF9jbGFzcywgXCJtYWtlRXZlbnRIYW5kbGVyXCIpLCBfY2xhc3MpKSwgX2NsYXNzKTtcbmV4cG9ydCBkZWZhdWx0IENhcmRSb29tOyIsImltcG9ydCAnQC9jb21wb25lbnRzL2RhdGUtcGlja2VyJztcbmltcG9ydCAnQC9jb21wb25lbnRzL2Ryb3AtZG93bic7XG5pbXBvcnQgQ2FyZFJvb20gZnJvbSAnQC9jb21wb25lbnRzL2NhcmQtcm9vbS9DYXJkUm9vbSc7XG4kKCgpID0+IHtcbiAgY29uc3QgY2FyZFJvb20gPSBuZXcgQ2FyZFJvb20oKTtcbiAgY2FyZFJvb20uaW5pdCgpO1xufSk7IiwiaW1wb3J0ICdqcXVlcnktdWknO1xuaW1wb3J0ICdAL2NvbXBvbmVudHMvaGVhZGVyJztcbmltcG9ydCAnQC9jb21wb25lbnRzL2RpYWdyYW0nO1xuaW1wb3J0ICdAL2NvbXBvbmVudHMvcmV2aWV3JztcbmltcG9ydCAnQC9jb21wb25lbnRzL2NhcmQtcm9vbSc7XG5pbXBvcnQgJy4vcm9vbS1kZXRhaWxzLnNjc3MnOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN0REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNqREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDOUpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDOVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN0R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///566\n")}},__webpack_module_cache__={},deferred;function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var c=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(c.exports,c,c.exports,__webpack_require__),c.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(t,e,c,n)=>{if(!e){var l=1/0;for(a=0;a<deferred.length;a++){for(var[e,c,n]=deferred[a],s=!0,d=0;d<e.length;d++)(!1&n||l>=n)&&Object.keys(__webpack_require__.O).every((t=>__webpack_require__.O[t](e[d])))?e.splice(d--,1):(s=!1,n<l&&(l=n));s&&(deferred.splice(a--,1),t=c())}return t}n=n||0;for(var a=deferred.length;a>0&&deferred[a-1][2]>n;a--)deferred[a]=deferred[a-1];deferred[a]=[e,c,n]},__webpack_require__.d=(t,e)=>{for(var c in e)__webpack_require__.o(e,c)&&!__webpack_require__.o(t,c)&&Object.defineProperty(t,c,{enumerable:!0,get:e[c]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={125:0};__webpack_require__.O.j=e=>0===t[e];var e=(e,c)=>{var n,l,[s,d,a]=c,i=0;for(n in d)__webpack_require__.o(d,n)&&(__webpack_require__.m[n]=d[n]);if(a)var g=a(__webpack_require__);for(e&&e(c);i<s.length;i++)l=s[i],__webpack_require__.o(t,l)&&t[l]&&t[l][0](),t[s[i]]=0;return __webpack_require__.O(g)},c=self.webpackChunk=self.webpackChunk||[];c.forEach(e.bind(null,0)),c.push=e.bind(null,c.push.bind(c))})();var __webpack_exports__=__webpack_require__.O(void 0,[251,248],(()=>__webpack_require__(566)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();