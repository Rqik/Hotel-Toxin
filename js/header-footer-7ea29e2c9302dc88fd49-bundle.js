(()=>{"use strict";var __webpack_modules__={157:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{eval("\n// EXTERNAL MODULE: ../node_modules/jquery-ui/ui/widget.js\nvar widget = __webpack_require__(803);\n// EXTERNAL MODULE: ../node_modules/air-datepicker/src/js/air-datepicker.js\nvar air_datepicker = __webpack_require__(248);\n// EXTERNAL MODULE: ../node_modules/jquery-mask-plugin/dist/jquery.mask.js\nvar jquery_mask = __webpack_require__(587);\n// EXTERNAL MODULE: ../node_modules/autobind-decorator/lib/esm/index.js\nvar esm = __webpack_require__(362);\n;// CONCATENATED MODULE: ./libs/datepicker/index.js\n/* provided dependency */ var $ = __webpack_require__(638);\nvar _class;\n\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\n\n\n\nlet DatePicker = (_class = class DatePicker {\n  constructor(options) {\n    this.props = {\n      position: 'bottom center',\n      range: true,\n      navTitles: {\n        days: 'MM yyyy'\n      },\n      clearButton: true,\n      prevHtml: options.iconBack,\n      nextHtml: options.iconForward,\n      minDate: new Date(),\n      keyboardNav: false,\n      multipleDates: 2,\n\n      onSelect(formattedDate, date, picker) {\n        const el = picker.$el.siblings(options.labelClass);\n        el.children(options.inputLeftClass).val(formattedDate.split(',')[0]);\n        el.children(options.inputRightClass).val(formattedDate.split(',')[1]);\n      }\n\n    };\n    this.propsRange = {\n      position: 'bottom center',\n      range: true,\n      navTitles: {\n        days: 'MM yyyy'\n      },\n      dateFormat: 'd M',\n      clearButton: true,\n      prevHtml: options.iconBack,\n      nextHtml: options.iconForward,\n      minDate: new Date(),\n      keyboardNav: false,\n      multipleDates: 2,\n      multipleDatesSeparator: ' - '\n    };\n    this.selectDate = {};\n    this.prevDay = new Date();\n    this.btnClass = '.datepicker--buttons';\n    this.datepickerRangeClass = options.datepickerRange;\n    this.datepickerClass = options.datepicker;\n    this.inputClass = options.inputClass;\n    this.inputLeftClass = options.inputLeftClass;\n    this.inputRightClass = options.inputRightClass;\n    this.labelClass = options.labelClass;\n    this.btnApplyClass = options.btnApplyClass;\n    this.$datepickerRange = $(this.datepickerRangeClass);\n    this.$datepicker = $(`${this.datepickerClass}, ${this.datepickerRangeClass}`);\n  }\n\n  init() {\n    this.$datepicker.each(this.addClassDatePicker);\n\n    if (this.labelClass) {\n      $(this.labelClass).each((_, el) => {\n        const $datePicker = $(el).siblings(this.datepickerClass);\n        $(el).click(this.makeShowSelectLabel($datePicker));\n      });\n    }\n\n    if (this.inputLeftClass) {\n      $(this.inputLeftClass).each((_, el) => {\n        const $datePicker = $(el).closest(this.labelClass).siblings(this.datepickerClass);\n        $(el).change(this.makeChangeSelectInput($datePicker, el));\n      });\n    }\n\n    if (this.inputRightClass) {\n      $(this.inputRightClass).each((_, el) => {\n        const $datePicker = $(el).closest(this.labelClass).siblings(this.datepickerClass);\n        $(el).change(this.makeChangeSelectInput($datePicker, el));\n      });\n    }\n\n    this.$datepickerRange.datepicker(this.propsRange);\n    $(this.inputClass).mask('00.00.0000');\n    this.$datepickerRange.mask('00 ZZZ - 00 ZZZ', {\n      translation: {\n        Z: {\n          pattern: /[A-zА-я]/\n        }\n      }\n    });\n\n    if (this.btnClass) {\n      $(this.btnClass).each((_, el) => {\n        if (!$(el).find('.datepicker--button-apply').length) {\n          $(el).find('span.datepicker--button').remove();\n          $(el).append(`<button class=\"datepicker--button\" data-action=\"clear\">\n               Очистить\n            </button>\n            <button class=\"datepicker--button-apply\n            ${this.btnApplyClass.replace(/^\\./, '')}\">\n              Применить\n            </button>`);\n        }\n      });\n    }\n\n    this.$datepicker.each((ind, el) => {\n      $(el).data('datepicker').$datepicker.find(this.btnApplyClass).on('click', this.makeHideDatePicker(ind));\n    });\n  }\n\n  makeChangeSelectInput($datepicker, input) {\n    const el = $datepicker.data('datepicker');\n    return () => {\n      // eslint-disable-next-line prefer-const\n      let [year, month, day] = $(input).val().split('.').reverse();\n      month = Number(month) - 1;\n      this.prevDay = new Date(year, month, day) > new Date() ? new Date(year, month, day) : new Date();\n      el.selectDate(this.prevDay);\n    };\n  }\n\n  makeHideDatePicker(ind) {\n    return () => {\n      $(this.$datepicker[ind]).data('datepicker').hide();\n    };\n  }\n\n  makeShowSelectLabel($el) {\n    return () => {\n      $el.data('datepicker').show();\n    };\n  }\n\n  addClassDatePicker(i, el) {\n    $(el).addClass(`js-date-picker-${i}`);\n    this.selectDate[`js-date-picker-${i}`] = $(el).datepicker(this.props);\n  }\n\n}, (_applyDecoratedDescriptor(_class.prototype, \"makeChangeSelectInput\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(_class.prototype, \"makeChangeSelectInput\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"addClassDatePicker\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(_class.prototype, \"addClassDatePicker\"), _class.prototype)), _class);\n\n;// CONCATENATED MODULE: ./components/date-picker/index.js\n/* provided dependency */ var date_picker_$ = __webpack_require__(638);\n\ndate_picker_$(() => {\n  const options = {\n    datepicker: '.js-date-picker',\n    datepickerRange: '.js-date-picker_range',\n    inputClass: '.js-date-picker__input',\n    inputLeftClass: '.js-date-picker__input_left',\n    inputRightClass: '.js-date-picker__input_right',\n    labelClass: '.js-date-picker__label',\n    btnApplyClass: '.js-datepicker--button-apply',\n    iconBack: '<i class=\"date-picker__icon\">arrow_back</i>',\n    iconForward: '<i class=\"date-picker__icon\">arrow_forward</i>'\n  };\n  const datePick = new DatePicker(options);\n  datePick.init();\n});\n;// CONCATENATED MODULE: ./components/drop-down/DropDown.js\n/* provided dependency */ var DropDown_$ = __webpack_require__(638);\nvar DropDown_class;\n\nfunction DropDown_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\n\nlet DropDown = (DropDown_class = class DropDown {\n  constructor() {\n    this.children = {};\n    this.dropDown = {};\n    this.dropDownClass = '.js-dropdown__select';\n    this.dropDownExtendClass = '.js-dropdown__select_extended';\n    this.controlPanelClass = '.js-dropdown__control-panel';\n    this.buttonClass = '.js-dropdown__button';\n    this.dropItemsClass = '.js-dropdown__items';\n    this.dropItemClass = '.js-dropdown__item';\n    this.itemCurrentClass = '.js-dropdown__item-current';\n    this.btnSubmitClass = '.js-dropdown__submit-button';\n    this.btnMinusClass = '.js-btn_minus';\n    this.btnResetClass = '.js-dropdown__reset-button';\n    this.spanClass = '.js-dropdown__span';\n    this.textCurrentClass = '.js-dropdown__text-current';\n    this.itemSpanClass = '.js-dropdown__item-span';\n    this.buttonDisableClass = 'dropdown__button_disabled';\n    this.toggleClass = 'dropdown__select_active';\n  }\n\n  init() {\n    DropDown_$(this.dropDownClass).each((i, el) => {\n      const className = `.js-dpd_slt-${i}`;\n      const name = `js-dpd_slt-${i}`;\n      this.dropDown[className] = DropDown_$(el);\n      el.classList.add(name);\n      this.active(className);\n      this.slideDrop(className);\n      this.childrenCurrentVal(className);\n      this.actionDropDown(className);\n    });\n    DropDown_$(this.dropDownExtendClass).each((i, el) => {\n      const className = `.js-dp_ext-${i}`;\n      const name = `js-dp_ext-${i}`;\n      this.dropDown[className] = DropDown_$(el);\n      el.classList.add(name);\n      this.active(className);\n      this.slideDrop(className);\n      this.childrenCurrentVal(className);\n      this.actionDropDownExtended(className);\n      this.buttonAction(className);\n    });\n  }\n\n  active(selector) {\n    if (!DropDown_$(selector).hasClass(this.toggleClass)) {\n      DropDown_$(`${selector} ${this.dropItemsClass}`).slideToggle(0);\n    }\n  }\n\n  slideDrop(selector) {\n    const current = this.dropDown[selector].children(`${this.itemCurrentClass}`);\n    const btn = this.dropDown[selector].find(`${this.btnSubmitClass}`);\n    current.on('click', this.makeToggleDropDown(selector));\n    document.addEventListener('click', this.makeCloseDropDown(selector));\n\n    if (btn.length) {\n      btn.on('click', this.makeToggleDropDown(selector));\n    }\n  }\n\n  makeCloseDropDown(selector) {\n    return event => {\n      const isHave = !!event.target.closest(selector);\n\n      if (!isHave) {\n        const items = this.dropDown[selector].find(`${this.dropItemsClass}`);\n        items.slideUp(300);\n        this.dropDown[selector].removeClass(this.toggleClass);\n      }\n    };\n  }\n\n  makeToggleDropDown(selector) {\n    const items = this.dropDown[selector].find(`${this.dropItemsClass}`);\n    return () => {\n      items.slideToggle(300);\n      this.dropDown[selector].toggleClass(this.toggleClass);\n    };\n  }\n\n  actionDropDown(selector) {\n    this.dropDown[selector].find(this.controlPanelClass).each((i, el) => {\n      DropDown_$(el).children(this.buttonClass).on('click', this.makeEventOperationSum({\n        selector,\n        i,\n        el\n      }, this.textCurrentNew));\n    });\n  }\n\n  actionDropDownExtended(selector) {\n    const $btnReset = this.dropDown[selector].find(this.btnResetClass);\n    this.dropDown[selector].find(this.controlPanelClass).each((i, el) => {\n      DropDown_$(el).children(this.buttonClass).on('click', this.makeEventOperationSum({\n        selector,\n        i,\n        el\n      }, this.textModify));\n      DropDown.btnHide($btnReset, this.children[selector][i]);\n    });\n  }\n\n  makeEventOperationSum(options, callBack) {\n    const {\n      selector,\n      i,\n      el\n    } = options;\n    const $span = DropDown_$(el).find(this.spanClass);\n    const $btnMinus = DropDown_$(el).children(this.btnMinusClass);\n    this.disableButton($btnMinus, $span);\n    return event => {\n      let item = this.children[selector][i];\n      const sum = event.currentTarget.textContent;\n      item += Number(`${sum}1`);\n\n      if (item <= 0) {\n        item = 0;\n      }\n\n      this.children[selector][i] = item;\n      $span.text(item);\n      callBack(selector);\n      this.disableButton($btnMinus, $span);\n    };\n  }\n\n  disableButton($btn, $span) {\n    if ($span.text() <= 0) {\n      $btn.addClass(this.buttonDisableClass);\n    } else {\n      $btn.removeClass(this.buttonDisableClass);\n    }\n  }\n\n  buttonAction(selector) {\n    this.dropDown[selector].find(this.btnResetClass).on('click', this.makeEventReset(selector));\n  }\n\n  makeEventReset(selector) {\n    const $currentText = this.dropDown[selector].find(this.textCurrentClass);\n    const $span = this.dropDown[selector].find(this.spanClass);\n    const $btnMinus = this.dropDown[selector].find(this.btnMinusClass);\n    return event => {\n      $currentText.text('Сколько гостей');\n      $span.text(0);\n      $btnMinus.addClass(this.buttonDisableClass);\n      this.children[selector].fill(0);\n      DropDown.btnHide(DropDown_$(event.currentTarget), 0);\n    };\n  }\n\n  dropItem(el) {\n    return {\n      count: DropDown_$(el).find(this.spanClass).text(),\n      name: DropDown_$(el).children(this.itemSpanClass).text()\n    };\n  }\n\n  textCurrentNew(selector) {\n    let textCurrent = '';\n    let countElem = 0;\n    this.dropDown[selector].find(this.dropItemClass).each((_, el) => {\n      const {\n        count,\n        name: nameElem\n      } = this.dropItem(el);\n\n      if (count > 0) {\n        countElem += 1;\n        textCurrent = `${DropDown.getText(textCurrent, countElem)} ${count} ${nameElem}`;\n      }\n    });\n    this.dropDown[selector].find(this.textCurrentClass).text(textCurrent);\n  }\n\n  static getText(textCurrent, countElem) {\n    return `${textCurrent}${countElem >= 2 ? ', ' : ' '}`;\n  }\n\n  textModify(selector) {\n    let textCurrent = 'Сколько гостей';\n    let adults = 0; // счетчик взрослых\n\n    let child = 0; // счетчик младенцев\n\n    const $btnReset = this.dropDown[selector].find(this.btnResetClass);\n    this.dropDown[selector].find(`${this.dropItemClass}`).each((_, el) => {\n      const {\n        count,\n        name\n      } = this.dropItem(el);\n\n      if (name === 'младенцы') {\n        child = count;\n      } else {\n        adults += +count;\n      }\n\n      textCurrent = DropDown.countAdult(adults, child) + DropDown.countChild(child);\n    });\n    this.dropDown[selector].find(this.textCurrentClass).text(textCurrent);\n    DropDown.btnHide($btnReset, adults, child);\n  }\n\n  static btnHide($btnReset, adults, child = 0) {\n    if (adults <= 0 && child <= 0) {\n      $btnReset.css('opacity', 0);\n    } else {\n      $btnReset.css('opacity', 1);\n    }\n  }\n\n  static countAdult(count, child) {\n    const s = child > 0 ? ', ' : ' ';\n\n    switch (true) {\n      case count <= 0:\n        return ' ';\n\n      case count <= 1:\n        return `${count} гость${s}`;\n\n      case count <= 4:\n        return `${count} гостя${s}`;\n\n      default:\n        return `${count} гостей${s}`;\n    }\n  }\n\n  static countChild(count) {\n    switch (true) {\n      case count <= 0:\n        return '';\n\n      case count <= 1:\n        return `${count} младенец`;\n\n      case count <= 4:\n        return `${count} младенца`;\n\n      default:\n        return `${count} младенцев`;\n    }\n  }\n\n  childrenCurrentVal(className) {\n    this.children[className] = [];\n    DropDown_$(`${className} ${this.spanClass}`).each((i, el) => {\n      this.children[className][i] = +el.textContent;\n    });\n  }\n\n}, (DropDown_applyDecoratedDescriptor(DropDown_class.prototype, \"makeCloseDropDown\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(DropDown_class.prototype, \"makeCloseDropDown\"), DropDown_class.prototype), DropDown_applyDecoratedDescriptor(DropDown_class.prototype, \"textCurrentNew\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(DropDown_class.prototype, \"textCurrentNew\"), DropDown_class.prototype), DropDown_applyDecoratedDescriptor(DropDown_class.prototype, \"textModify\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(DropDown_class.prototype, \"textModify\"), DropDown_class.prototype)), DropDown_class);\n\n;// CONCATENATED MODULE: ./components/drop-down/index.js\n/* provided dependency */ var drop_down_$ = __webpack_require__(638);\n\ndrop_down_$(() => {\n  const dropdown = new DropDown();\n  dropdown.init();\n});\n;// CONCATENATED MODULE: ./components/menu/Menu.js\n/* provided dependency */ var Menu_$ = __webpack_require__(638);\nvar Menu_class;\n\nfunction Menu_applyDecoratedDescriptor(target, property, decorators, descriptor, context) { var desc = {}; Object.keys(descriptor).forEach(function (key) { desc[key] = descriptor[key]; }); desc.enumerable = !!desc.enumerable; desc.configurable = !!desc.configurable; if ('value' in desc || desc.initializer) { desc.writable = true; } desc = decorators.slice().reverse().reduce(function (desc, decorator) { return decorator(target, property, desc) || desc; }, desc); if (context && desc.initializer !== void 0) { desc.value = desc.initializer ? desc.initializer.call(context) : void 0; desc.initializer = undefined; } if (desc.initializer === void 0) { Object.defineProperty(target, property, desc); desc = null; } return desc; }\n\n\nlet Menu = (Menu_class = class Menu {\n  constructor() {\n    this.toggleClass = 'menu__burger_active';\n    this.menuItemListClass = '.js-menu__item_with-list';\n    this.itemsClass = '.js-menu__items';\n    this.burgerClass = '.js-menu__burger';\n    this.burger = Menu_$(this.burgerClass);\n    this.dropListClass = '.js-menu__drop-list';\n    this.icon = '<i class=\"menu__icon\"> expand_more </i>';\n  }\n\n  init() {\n    const $menuItem = Menu_$(this.menuItemListClass);\n    this.burger.each((_, el) => {\n      Menu_$(el).click(this.toggleMenuBurger);\n    });\n    Menu_$(document).click(this.documentEvent);\n    $menuItem.append(this.icon);\n    $menuItem.hover(this.handlerIn, this.handlerOut);\n  }\n\n  documentEvent(event) {\n    if (Menu_$(event.target).closest(this.itemsClass).length || Menu_$(event.target).closest(this.burgerClass).length) {\n      return;\n    }\n\n    Menu_$(this.itemsClass).removeClass(this.toggleClass);\n  }\n\n  handlerIn(event) {\n    Menu_$(this.dropListClass, event.currentTarget).stop().slideDown(200);\n  }\n\n  handlerOut(event) {\n    Menu_$(this.dropListClass, event.currentTarget).stop().slideUp(200);\n  }\n\n  toggleMenuBurger(event) {\n    Menu_$(event.currentTarget).siblings(this.itemsClass).toggleClass(this.toggleClass);\n  }\n\n}, (Menu_applyDecoratedDescriptor(Menu_class.prototype, \"documentEvent\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(Menu_class.prototype, \"documentEvent\"), Menu_class.prototype), Menu_applyDecoratedDescriptor(Menu_class.prototype, \"handlerIn\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(Menu_class.prototype, \"handlerIn\"), Menu_class.prototype), Menu_applyDecoratedDescriptor(Menu_class.prototype, \"handlerOut\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(Menu_class.prototype, \"handlerOut\"), Menu_class.prototype), Menu_applyDecoratedDescriptor(Menu_class.prototype, \"toggleMenuBurger\", [esm/* boundMethod */.MR], Object.getOwnPropertyDescriptor(Menu_class.prototype, \"toggleMenuBurger\"), Menu_class.prototype)), Menu_class);\n\n;// CONCATENATED MODULE: ./components/menu/index.js\n/* provided dependency */ var menu_$ = __webpack_require__(638);\n\nmenu_$(() => {\n  const menu = new Menu();\n  menu.init();\n});\n;// CONCATENATED MODULE: ./components/header/index.js\n\n;// CONCATENATED MODULE: ./components/field/Field.js\n/* provided dependency */ var Field_$ = __webpack_require__(638);\n\n\nclass Field {\n  static init() {\n    Field_$('.js-field__input[name*=email]').mask('A', {\n      translation: {\n        A: {\n          pattern: /[\\w@\\-.+]/,\n          recursive: true\n        }\n      }\n    });\n    Field_$('.js-field__input[name*=name]').mask('A', {\n      translation: {\n        A: {\n          pattern: /[\\w+]/,\n          recursive: true\n        }\n      }\n    });\n    Field_$('.js-field_text[name*=date]').mask('00.00.0000');\n  }\n\n}\n\n\n;// CONCATENATED MODULE: ./components/field/index.js\n/* provided dependency */ var field_$ = __webpack_require__(638);\n\nfield_$(() => {\n  Field.init();\n});\n;// CONCATENATED MODULE: ./components/footer/index.js\n\n;// CONCATENATED MODULE: ./pages/header-footer/index.js\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTU3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGlicy9kYXRlcGlja2VyL2luZGV4LmpzP2U0NDciLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9kYXRlLXBpY2tlci9pbmRleC5qcz9mMTBhIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvZHJvcC1kb3duL0Ryb3BEb3duLmpzPzU0YTUiLCJ3ZWJwYWNrOi8vLy4vY29tcG9uZW50cy9kcm9wLWRvd24vaW5kZXguanM/NjIwYSIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL21lbnUvTWVudS5qcz9hZGIwIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvbWVudS9pbmRleC5qcz8xMDVlIiwid2VicGFjazovLy8uL2NvbXBvbmVudHMvZmllbGQvRmllbGQuanM/M2I5MyIsIndlYnBhY2s6Ly8vLi9jb21wb25lbnRzL2ZpZWxkL2luZGV4LmpzPzM4ZmQiLCJ3ZWJwYWNrOi8vLy4vcGFnZXMvaGVhZGVyLWZvb3Rlci9pbmRleC5qcz9kZTUxIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfY2xhc3M7XG5cbmZ1bmN0aW9uIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IodGFyZ2V0LCBwcm9wZXJ0eSwgZGVjb3JhdG9ycywgZGVzY3JpcHRvciwgY29udGV4dCkgeyB2YXIgZGVzYyA9IHt9OyBPYmplY3Qua2V5cyhkZXNjcmlwdG9yKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgZGVzY1trZXldID0gZGVzY3JpcHRvcltrZXldOyB9KTsgZGVzYy5lbnVtZXJhYmxlID0gISFkZXNjLmVudW1lcmFibGU7IGRlc2MuY29uZmlndXJhYmxlID0gISFkZXNjLmNvbmZpZ3VyYWJsZTsgaWYgKCd2YWx1ZScgaW4gZGVzYyB8fCBkZXNjLmluaXRpYWxpemVyKSB7IGRlc2Mud3JpdGFibGUgPSB0cnVlOyB9IGRlc2MgPSBkZWNvcmF0b3JzLnNsaWNlKCkucmV2ZXJzZSgpLnJlZHVjZShmdW5jdGlvbiAoZGVzYywgZGVjb3JhdG9yKSB7IHJldHVybiBkZWNvcmF0b3IodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzYykgfHwgZGVzYzsgfSwgZGVzYyk7IGlmIChjb250ZXh0ICYmIGRlc2MuaW5pdGlhbGl6ZXIgIT09IHZvaWQgMCkgeyBkZXNjLnZhbHVlID0gZGVzYy5pbml0aWFsaXplciA/IGRlc2MuaW5pdGlhbGl6ZXIuY2FsbChjb250ZXh0KSA6IHZvaWQgMDsgZGVzYy5pbml0aWFsaXplciA9IHVuZGVmaW5lZDsgfSBpZiAoZGVzYy5pbml0aWFsaXplciA9PT0gdm9pZCAwKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCBkZXNjKTsgZGVzYyA9IG51bGw7IH0gcmV0dXJuIGRlc2M7IH1cblxuaW1wb3J0ICdhaXItZGF0ZXBpY2tlcic7XG5pbXBvcnQgJ2pxdWVyeS1tYXNrLXBsdWdpbic7XG5pbXBvcnQgeyBib3VuZE1ldGhvZCB9IGZyb20gJ2F1dG9iaW5kLWRlY29yYXRvcic7XG5sZXQgRGF0ZVBpY2tlciA9IChfY2xhc3MgPSBjbGFzcyBEYXRlUGlja2VyIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMucHJvcHMgPSB7XG4gICAgICBwb3NpdGlvbjogJ2JvdHRvbSBjZW50ZXInLFxuICAgICAgcmFuZ2U6IHRydWUsXG4gICAgICBuYXZUaXRsZXM6IHtcbiAgICAgICAgZGF5czogJ01NIHl5eXknXG4gICAgICB9LFxuICAgICAgY2xlYXJCdXR0b246IHRydWUsXG4gICAgICBwcmV2SHRtbDogb3B0aW9ucy5pY29uQmFjayxcbiAgICAgIG5leHRIdG1sOiBvcHRpb25zLmljb25Gb3J3YXJkLFxuICAgICAgbWluRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgIGtleWJvYXJkTmF2OiBmYWxzZSxcbiAgICAgIG11bHRpcGxlRGF0ZXM6IDIsXG5cbiAgICAgIG9uU2VsZWN0KGZvcm1hdHRlZERhdGUsIGRhdGUsIHBpY2tlcikge1xuICAgICAgICBjb25zdCBlbCA9IHBpY2tlci4kZWwuc2libGluZ3Mob3B0aW9ucy5sYWJlbENsYXNzKTtcbiAgICAgICAgZWwuY2hpbGRyZW4ob3B0aW9ucy5pbnB1dExlZnRDbGFzcykudmFsKGZvcm1hdHRlZERhdGUuc3BsaXQoJywnKVswXSk7XG4gICAgICAgIGVsLmNoaWxkcmVuKG9wdGlvbnMuaW5wdXRSaWdodENsYXNzKS52YWwoZm9ybWF0dGVkRGF0ZS5zcGxpdCgnLCcpWzFdKTtcbiAgICAgIH1cblxuICAgIH07XG4gICAgdGhpcy5wcm9wc1JhbmdlID0ge1xuICAgICAgcG9zaXRpb246ICdib3R0b20gY2VudGVyJyxcbiAgICAgIHJhbmdlOiB0cnVlLFxuICAgICAgbmF2VGl0bGVzOiB7XG4gICAgICAgIGRheXM6ICdNTSB5eXl5J1xuICAgICAgfSxcbiAgICAgIGRhdGVGb3JtYXQ6ICdkIE0nLFxuICAgICAgY2xlYXJCdXR0b246IHRydWUsXG4gICAgICBwcmV2SHRtbDogb3B0aW9ucy5pY29uQmFjayxcbiAgICAgIG5leHRIdG1sOiBvcHRpb25zLmljb25Gb3J3YXJkLFxuICAgICAgbWluRGF0ZTogbmV3IERhdGUoKSxcbiAgICAgIGtleWJvYXJkTmF2OiBmYWxzZSxcbiAgICAgIG11bHRpcGxlRGF0ZXM6IDIsXG4gICAgICBtdWx0aXBsZURhdGVzU2VwYXJhdG9yOiAnIC0gJ1xuICAgIH07XG4gICAgdGhpcy5zZWxlY3REYXRlID0ge307XG4gICAgdGhpcy5wcmV2RGF5ID0gbmV3IERhdGUoKTtcbiAgICB0aGlzLmJ0bkNsYXNzID0gJy5kYXRlcGlja2VyLS1idXR0b25zJztcbiAgICB0aGlzLmRhdGVwaWNrZXJSYW5nZUNsYXNzID0gb3B0aW9ucy5kYXRlcGlja2VyUmFuZ2U7XG4gICAgdGhpcy5kYXRlcGlja2VyQ2xhc3MgPSBvcHRpb25zLmRhdGVwaWNrZXI7XG4gICAgdGhpcy5pbnB1dENsYXNzID0gb3B0aW9ucy5pbnB1dENsYXNzO1xuICAgIHRoaXMuaW5wdXRMZWZ0Q2xhc3MgPSBvcHRpb25zLmlucHV0TGVmdENsYXNzO1xuICAgIHRoaXMuaW5wdXRSaWdodENsYXNzID0gb3B0aW9ucy5pbnB1dFJpZ2h0Q2xhc3M7XG4gICAgdGhpcy5sYWJlbENsYXNzID0gb3B0aW9ucy5sYWJlbENsYXNzO1xuICAgIHRoaXMuYnRuQXBwbHlDbGFzcyA9IG9wdGlvbnMuYnRuQXBwbHlDbGFzcztcbiAgICB0aGlzLiRkYXRlcGlja2VyUmFuZ2UgPSAkKHRoaXMuZGF0ZXBpY2tlclJhbmdlQ2xhc3MpO1xuICAgIHRoaXMuJGRhdGVwaWNrZXIgPSAkKGAke3RoaXMuZGF0ZXBpY2tlckNsYXNzfSwgJHt0aGlzLmRhdGVwaWNrZXJSYW5nZUNsYXNzfWApO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLiRkYXRlcGlja2VyLmVhY2godGhpcy5hZGRDbGFzc0RhdGVQaWNrZXIpO1xuXG4gICAgaWYgKHRoaXMubGFiZWxDbGFzcykge1xuICAgICAgJCh0aGlzLmxhYmVsQ2xhc3MpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICAgIGNvbnN0ICRkYXRlUGlja2VyID0gJChlbCkuc2libGluZ3ModGhpcy5kYXRlcGlja2VyQ2xhc3MpO1xuICAgICAgICAkKGVsKS5jbGljayh0aGlzLm1ha2VTaG93U2VsZWN0TGFiZWwoJGRhdGVQaWNrZXIpKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlucHV0TGVmdENsYXNzKSB7XG4gICAgICAkKHRoaXMuaW5wdXRMZWZ0Q2xhc3MpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICAgIGNvbnN0ICRkYXRlUGlja2VyID0gJChlbCkuY2xvc2VzdCh0aGlzLmxhYmVsQ2xhc3MpLnNpYmxpbmdzKHRoaXMuZGF0ZXBpY2tlckNsYXNzKTtcbiAgICAgICAgJChlbCkuY2hhbmdlKHRoaXMubWFrZUNoYW5nZVNlbGVjdElucHV0KCRkYXRlUGlja2VyLCBlbCkpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaW5wdXRSaWdodENsYXNzKSB7XG4gICAgICAkKHRoaXMuaW5wdXRSaWdodENsYXNzKS5lYWNoKChfLCBlbCkgPT4ge1xuICAgICAgICBjb25zdCAkZGF0ZVBpY2tlciA9ICQoZWwpLmNsb3Nlc3QodGhpcy5sYWJlbENsYXNzKS5zaWJsaW5ncyh0aGlzLmRhdGVwaWNrZXJDbGFzcyk7XG4gICAgICAgICQoZWwpLmNoYW5nZSh0aGlzLm1ha2VDaGFuZ2VTZWxlY3RJbnB1dCgkZGF0ZVBpY2tlciwgZWwpKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuJGRhdGVwaWNrZXJSYW5nZS5kYXRlcGlja2VyKHRoaXMucHJvcHNSYW5nZSk7XG4gICAgJCh0aGlzLmlucHV0Q2xhc3MpLm1hc2soJzAwLjAwLjAwMDAnKTtcbiAgICB0aGlzLiRkYXRlcGlja2VyUmFuZ2UubWFzaygnMDAgWlpaIC0gMDAgWlpaJywge1xuICAgICAgdHJhbnNsYXRpb246IHtcbiAgICAgICAgWjoge1xuICAgICAgICAgIHBhdHRlcm46IC9bQS160JAt0Y9dL1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5idG5DbGFzcykge1xuICAgICAgJCh0aGlzLmJ0bkNsYXNzKS5lYWNoKChfLCBlbCkgPT4ge1xuICAgICAgICBpZiAoISQoZWwpLmZpbmQoJy5kYXRlcGlja2VyLS1idXR0b24tYXBwbHknKS5sZW5ndGgpIHtcbiAgICAgICAgICAkKGVsKS5maW5kKCdzcGFuLmRhdGVwaWNrZXItLWJ1dHRvbicpLnJlbW92ZSgpO1xuICAgICAgICAgICQoZWwpLmFwcGVuZChgPGJ1dHRvbiBjbGFzcz1cImRhdGVwaWNrZXItLWJ1dHRvblwiIGRhdGEtYWN0aW9uPVwiY2xlYXJcIj5cbiAgICAgICAgICAgICAgINCe0YfQuNGB0YLQuNGC0YxcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImRhdGVwaWNrZXItLWJ1dHRvbi1hcHBseVxuICAgICAgICAgICAgJHt0aGlzLmJ0bkFwcGx5Q2xhc3MucmVwbGFjZSgvXlxcLi8sICcnKX1cIj5cbiAgICAgICAgICAgICAg0J/RgNC40LzQtdC90LjRgtGMXG4gICAgICAgICAgICA8L2J1dHRvbj5gKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy4kZGF0ZXBpY2tlci5lYWNoKChpbmQsIGVsKSA9PiB7XG4gICAgICAkKGVsKS5kYXRhKCdkYXRlcGlja2VyJykuJGRhdGVwaWNrZXIuZmluZCh0aGlzLmJ0bkFwcGx5Q2xhc3MpLm9uKCdjbGljaycsIHRoaXMubWFrZUhpZGVEYXRlUGlja2VyKGluZCkpO1xuICAgIH0pO1xuICB9XG5cbiAgbWFrZUNoYW5nZVNlbGVjdElucHV0KCRkYXRlcGlja2VyLCBpbnB1dCkge1xuICAgIGNvbnN0IGVsID0gJGRhdGVwaWNrZXIuZGF0YSgnZGF0ZXBpY2tlcicpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0XG4gICAgICBsZXQgW3llYXIsIG1vbnRoLCBkYXldID0gJChpbnB1dCkudmFsKCkuc3BsaXQoJy4nKS5yZXZlcnNlKCk7XG4gICAgICBtb250aCA9IE51bWJlcihtb250aCkgLSAxO1xuICAgICAgdGhpcy5wcmV2RGF5ID0gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSkgPiBuZXcgRGF0ZSgpID8gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSkgOiBuZXcgRGF0ZSgpO1xuICAgICAgZWwuc2VsZWN0RGF0ZSh0aGlzLnByZXZEYXkpO1xuICAgIH07XG4gIH1cblxuICBtYWtlSGlkZURhdGVQaWNrZXIoaW5kKSB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgICQodGhpcy4kZGF0ZXBpY2tlcltpbmRdKS5kYXRhKCdkYXRlcGlja2VyJykuaGlkZSgpO1xuICAgIH07XG4gIH1cblxuICBtYWtlU2hvd1NlbGVjdExhYmVsKCRlbCkge1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAkZWwuZGF0YSgnZGF0ZXBpY2tlcicpLnNob3coKTtcbiAgICB9O1xuICB9XG5cbiAgYWRkQ2xhc3NEYXRlUGlja2VyKGksIGVsKSB7XG4gICAgJChlbCkuYWRkQ2xhc3MoYGpzLWRhdGUtcGlja2VyLSR7aX1gKTtcbiAgICB0aGlzLnNlbGVjdERhdGVbYGpzLWRhdGUtcGlja2VyLSR7aX1gXSA9ICQoZWwpLmRhdGVwaWNrZXIodGhpcy5wcm9wcyk7XG4gIH1cblxufSwgKF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJtYWtlQ2hhbmdlU2VsZWN0SW5wdXRcIiwgW2JvdW5kTWV0aG9kXSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcIm1ha2VDaGFuZ2VTZWxlY3RJbnB1dFwiKSwgX2NsYXNzLnByb3RvdHlwZSksIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJhZGRDbGFzc0RhdGVQaWNrZXJcIiwgW2JvdW5kTWV0aG9kXSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcImFkZENsYXNzRGF0ZVBpY2tlclwiKSwgX2NsYXNzLnByb3RvdHlwZSkpLCBfY2xhc3MpO1xuZXhwb3J0IHsgRGF0ZVBpY2tlciB9OyIsImltcG9ydCB7IERhdGVQaWNrZXIgfSBmcm9tICdAL2xpYnMvZGF0ZXBpY2tlcic7XG4kKCgpID0+IHtcbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBkYXRlcGlja2VyOiAnLmpzLWRhdGUtcGlja2VyJyxcbiAgICBkYXRlcGlja2VyUmFuZ2U6ICcuanMtZGF0ZS1waWNrZXJfcmFuZ2UnLFxuICAgIGlucHV0Q2xhc3M6ICcuanMtZGF0ZS1waWNrZXJfX2lucHV0JyxcbiAgICBpbnB1dExlZnRDbGFzczogJy5qcy1kYXRlLXBpY2tlcl9faW5wdXRfbGVmdCcsXG4gICAgaW5wdXRSaWdodENsYXNzOiAnLmpzLWRhdGUtcGlja2VyX19pbnB1dF9yaWdodCcsXG4gICAgbGFiZWxDbGFzczogJy5qcy1kYXRlLXBpY2tlcl9fbGFiZWwnLFxuICAgIGJ0bkFwcGx5Q2xhc3M6ICcuanMtZGF0ZXBpY2tlci0tYnV0dG9uLWFwcGx5JyxcbiAgICBpY29uQmFjazogJzxpIGNsYXNzPVwiZGF0ZS1waWNrZXJfX2ljb25cIj5hcnJvd19iYWNrPC9pPicsXG4gICAgaWNvbkZvcndhcmQ6ICc8aSBjbGFzcz1cImRhdGUtcGlja2VyX19pY29uXCI+YXJyb3dfZm9yd2FyZDwvaT4nXG4gIH07XG4gIGNvbnN0IGRhdGVQaWNrID0gbmV3IERhdGVQaWNrZXIob3B0aW9ucyk7XG4gIGRhdGVQaWNrLmluaXQoKTtcbn0pOyIsInZhciBfY2xhc3M7XG5cbmZ1bmN0aW9uIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IodGFyZ2V0LCBwcm9wZXJ0eSwgZGVjb3JhdG9ycywgZGVzY3JpcHRvciwgY29udGV4dCkgeyB2YXIgZGVzYyA9IHt9OyBPYmplY3Qua2V5cyhkZXNjcmlwdG9yKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgZGVzY1trZXldID0gZGVzY3JpcHRvcltrZXldOyB9KTsgZGVzYy5lbnVtZXJhYmxlID0gISFkZXNjLmVudW1lcmFibGU7IGRlc2MuY29uZmlndXJhYmxlID0gISFkZXNjLmNvbmZpZ3VyYWJsZTsgaWYgKCd2YWx1ZScgaW4gZGVzYyB8fCBkZXNjLmluaXRpYWxpemVyKSB7IGRlc2Mud3JpdGFibGUgPSB0cnVlOyB9IGRlc2MgPSBkZWNvcmF0b3JzLnNsaWNlKCkucmV2ZXJzZSgpLnJlZHVjZShmdW5jdGlvbiAoZGVzYywgZGVjb3JhdG9yKSB7IHJldHVybiBkZWNvcmF0b3IodGFyZ2V0LCBwcm9wZXJ0eSwgZGVzYykgfHwgZGVzYzsgfSwgZGVzYyk7IGlmIChjb250ZXh0ICYmIGRlc2MuaW5pdGlhbGl6ZXIgIT09IHZvaWQgMCkgeyBkZXNjLnZhbHVlID0gZGVzYy5pbml0aWFsaXplciA/IGRlc2MuaW5pdGlhbGl6ZXIuY2FsbChjb250ZXh0KSA6IHZvaWQgMDsgZGVzYy5pbml0aWFsaXplciA9IHVuZGVmaW5lZDsgfSBpZiAoZGVzYy5pbml0aWFsaXplciA9PT0gdm9pZCAwKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIHByb3BlcnR5LCBkZXNjKTsgZGVzYyA9IG51bGw7IH0gcmV0dXJuIGRlc2M7IH1cblxuaW1wb3J0IHsgYm91bmRNZXRob2QgfSBmcm9tICdhdXRvYmluZC1kZWNvcmF0b3InO1xubGV0IERyb3BEb3duID0gKF9jbGFzcyA9IGNsYXNzIERyb3BEb3duIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5jaGlsZHJlbiA9IHt9O1xuICAgIHRoaXMuZHJvcERvd24gPSB7fTtcbiAgICB0aGlzLmRyb3BEb3duQ2xhc3MgPSAnLmpzLWRyb3Bkb3duX19zZWxlY3QnO1xuICAgIHRoaXMuZHJvcERvd25FeHRlbmRDbGFzcyA9ICcuanMtZHJvcGRvd25fX3NlbGVjdF9leHRlbmRlZCc7XG4gICAgdGhpcy5jb250cm9sUGFuZWxDbGFzcyA9ICcuanMtZHJvcGRvd25fX2NvbnRyb2wtcGFuZWwnO1xuICAgIHRoaXMuYnV0dG9uQ2xhc3MgPSAnLmpzLWRyb3Bkb3duX19idXR0b24nO1xuICAgIHRoaXMuZHJvcEl0ZW1zQ2xhc3MgPSAnLmpzLWRyb3Bkb3duX19pdGVtcyc7XG4gICAgdGhpcy5kcm9wSXRlbUNsYXNzID0gJy5qcy1kcm9wZG93bl9faXRlbSc7XG4gICAgdGhpcy5pdGVtQ3VycmVudENsYXNzID0gJy5qcy1kcm9wZG93bl9faXRlbS1jdXJyZW50JztcbiAgICB0aGlzLmJ0blN1Ym1pdENsYXNzID0gJy5qcy1kcm9wZG93bl9fc3VibWl0LWJ1dHRvbic7XG4gICAgdGhpcy5idG5NaW51c0NsYXNzID0gJy5qcy1idG5fbWludXMnO1xuICAgIHRoaXMuYnRuUmVzZXRDbGFzcyA9ICcuanMtZHJvcGRvd25fX3Jlc2V0LWJ1dHRvbic7XG4gICAgdGhpcy5zcGFuQ2xhc3MgPSAnLmpzLWRyb3Bkb3duX19zcGFuJztcbiAgICB0aGlzLnRleHRDdXJyZW50Q2xhc3MgPSAnLmpzLWRyb3Bkb3duX190ZXh0LWN1cnJlbnQnO1xuICAgIHRoaXMuaXRlbVNwYW5DbGFzcyA9ICcuanMtZHJvcGRvd25fX2l0ZW0tc3Bhbic7XG4gICAgdGhpcy5idXR0b25EaXNhYmxlQ2xhc3MgPSAnZHJvcGRvd25fX2J1dHRvbl9kaXNhYmxlZCc7XG4gICAgdGhpcy50b2dnbGVDbGFzcyA9ICdkcm9wZG93bl9fc2VsZWN0X2FjdGl2ZSc7XG4gIH1cblxuICBpbml0KCkge1xuICAgICQodGhpcy5kcm9wRG93bkNsYXNzKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgICAgY29uc3QgY2xhc3NOYW1lID0gYC5qcy1kcGRfc2x0LSR7aX1gO1xuICAgICAgY29uc3QgbmFtZSA9IGBqcy1kcGRfc2x0LSR7aX1gO1xuICAgICAgdGhpcy5kcm9wRG93bltjbGFzc05hbWVdID0gJChlbCk7XG4gICAgICBlbC5jbGFzc0xpc3QuYWRkKG5hbWUpO1xuICAgICAgdGhpcy5hY3RpdmUoY2xhc3NOYW1lKTtcbiAgICAgIHRoaXMuc2xpZGVEcm9wKGNsYXNzTmFtZSk7XG4gICAgICB0aGlzLmNoaWxkcmVuQ3VycmVudFZhbChjbGFzc05hbWUpO1xuICAgICAgdGhpcy5hY3Rpb25Ecm9wRG93bihjbGFzc05hbWUpO1xuICAgIH0pO1xuICAgICQodGhpcy5kcm9wRG93bkV4dGVuZENsYXNzKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgICAgY29uc3QgY2xhc3NOYW1lID0gYC5qcy1kcF9leHQtJHtpfWA7XG4gICAgICBjb25zdCBuYW1lID0gYGpzLWRwX2V4dC0ke2l9YDtcbiAgICAgIHRoaXMuZHJvcERvd25bY2xhc3NOYW1lXSA9ICQoZWwpO1xuICAgICAgZWwuY2xhc3NMaXN0LmFkZChuYW1lKTtcbiAgICAgIHRoaXMuYWN0aXZlKGNsYXNzTmFtZSk7XG4gICAgICB0aGlzLnNsaWRlRHJvcChjbGFzc05hbWUpO1xuICAgICAgdGhpcy5jaGlsZHJlbkN1cnJlbnRWYWwoY2xhc3NOYW1lKTtcbiAgICAgIHRoaXMuYWN0aW9uRHJvcERvd25FeHRlbmRlZChjbGFzc05hbWUpO1xuICAgICAgdGhpcy5idXR0b25BY3Rpb24oY2xhc3NOYW1lKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFjdGl2ZShzZWxlY3Rvcikge1xuICAgIGlmICghJChzZWxlY3RvcikuaGFzQ2xhc3ModGhpcy50b2dnbGVDbGFzcykpIHtcbiAgICAgICQoYCR7c2VsZWN0b3J9ICR7dGhpcy5kcm9wSXRlbXNDbGFzc31gKS5zbGlkZVRvZ2dsZSgwKTtcbiAgICB9XG4gIH1cblxuICBzbGlkZURyb3Aoc2VsZWN0b3IpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5kcm9wRG93bltzZWxlY3Rvcl0uY2hpbGRyZW4oYCR7dGhpcy5pdGVtQ3VycmVudENsYXNzfWApO1xuICAgIGNvbnN0IGJ0biA9IHRoaXMuZHJvcERvd25bc2VsZWN0b3JdLmZpbmQoYCR7dGhpcy5idG5TdWJtaXRDbGFzc31gKTtcbiAgICBjdXJyZW50Lm9uKCdjbGljaycsIHRoaXMubWFrZVRvZ2dsZURyb3BEb3duKHNlbGVjdG9yKSk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm1ha2VDbG9zZURyb3BEb3duKHNlbGVjdG9yKSk7XG5cbiAgICBpZiAoYnRuLmxlbmd0aCkge1xuICAgICAgYnRuLm9uKCdjbGljaycsIHRoaXMubWFrZVRvZ2dsZURyb3BEb3duKHNlbGVjdG9yKSk7XG4gICAgfVxuICB9XG5cbiAgbWFrZUNsb3NlRHJvcERvd24oc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gZXZlbnQgPT4ge1xuICAgICAgY29uc3QgaXNIYXZlID0gISFldmVudC50YXJnZXQuY2xvc2VzdChzZWxlY3Rvcik7XG5cbiAgICAgIGlmICghaXNIYXZlKSB7XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5kcm9wRG93bltzZWxlY3Rvcl0uZmluZChgJHt0aGlzLmRyb3BJdGVtc0NsYXNzfWApO1xuICAgICAgICBpdGVtcy5zbGlkZVVwKDMwMCk7XG4gICAgICAgIHRoaXMuZHJvcERvd25bc2VsZWN0b3JdLnJlbW92ZUNsYXNzKHRoaXMudG9nZ2xlQ2xhc3MpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBtYWtlVG9nZ2xlRHJvcERvd24oc2VsZWN0b3IpIHtcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuZHJvcERvd25bc2VsZWN0b3JdLmZpbmQoYCR7dGhpcy5kcm9wSXRlbXNDbGFzc31gKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaXRlbXMuc2xpZGVUb2dnbGUoMzAwKTtcbiAgICAgIHRoaXMuZHJvcERvd25bc2VsZWN0b3JdLnRvZ2dsZUNsYXNzKHRoaXMudG9nZ2xlQ2xhc3MpO1xuICAgIH07XG4gIH1cblxuICBhY3Rpb25Ecm9wRG93bihzZWxlY3Rvcikge1xuICAgIHRoaXMuZHJvcERvd25bc2VsZWN0b3JdLmZpbmQodGhpcy5jb250cm9sUGFuZWxDbGFzcykuZWFjaCgoaSwgZWwpID0+IHtcbiAgICAgICQoZWwpLmNoaWxkcmVuKHRoaXMuYnV0dG9uQ2xhc3MpLm9uKCdjbGljaycsIHRoaXMubWFrZUV2ZW50T3BlcmF0aW9uU3VtKHtcbiAgICAgICAgc2VsZWN0b3IsXG4gICAgICAgIGksXG4gICAgICAgIGVsXG4gICAgICB9LCB0aGlzLnRleHRDdXJyZW50TmV3KSk7XG4gICAgfSk7XG4gIH1cblxuICBhY3Rpb25Ecm9wRG93bkV4dGVuZGVkKHNlbGVjdG9yKSB7XG4gICAgY29uc3QgJGJ0blJlc2V0ID0gdGhpcy5kcm9wRG93bltzZWxlY3Rvcl0uZmluZCh0aGlzLmJ0blJlc2V0Q2xhc3MpO1xuICAgIHRoaXMuZHJvcERvd25bc2VsZWN0b3JdLmZpbmQodGhpcy5jb250cm9sUGFuZWxDbGFzcykuZWFjaCgoaSwgZWwpID0+IHtcbiAgICAgICQoZWwpLmNoaWxkcmVuKHRoaXMuYnV0dG9uQ2xhc3MpLm9uKCdjbGljaycsIHRoaXMubWFrZUV2ZW50T3BlcmF0aW9uU3VtKHtcbiAgICAgICAgc2VsZWN0b3IsXG4gICAgICAgIGksXG4gICAgICAgIGVsXG4gICAgICB9LCB0aGlzLnRleHRNb2RpZnkpKTtcbiAgICAgIERyb3BEb3duLmJ0bkhpZGUoJGJ0blJlc2V0LCB0aGlzLmNoaWxkcmVuW3NlbGVjdG9yXVtpXSk7XG4gICAgfSk7XG4gIH1cblxuICBtYWtlRXZlbnRPcGVyYXRpb25TdW0ob3B0aW9ucywgY2FsbEJhY2spIHtcbiAgICBjb25zdCB7XG4gICAgICBzZWxlY3RvcixcbiAgICAgIGksXG4gICAgICBlbFxuICAgIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0ICRzcGFuID0gJChlbCkuZmluZCh0aGlzLnNwYW5DbGFzcyk7XG4gICAgY29uc3QgJGJ0bk1pbnVzID0gJChlbCkuY2hpbGRyZW4odGhpcy5idG5NaW51c0NsYXNzKTtcbiAgICB0aGlzLmRpc2FibGVCdXR0b24oJGJ0bk1pbnVzLCAkc3Bhbik7XG4gICAgcmV0dXJuIGV2ZW50ID0+IHtcbiAgICAgIGxldCBpdGVtID0gdGhpcy5jaGlsZHJlbltzZWxlY3Rvcl1baV07XG4gICAgICBjb25zdCBzdW0gPSBldmVudC5jdXJyZW50VGFyZ2V0LnRleHRDb250ZW50O1xuICAgICAgaXRlbSArPSBOdW1iZXIoYCR7c3VtfTFgKTtcblxuICAgICAgaWYgKGl0ZW0gPD0gMCkge1xuICAgICAgICBpdGVtID0gMDtcbiAgICAgIH1cblxuICAgICAgdGhpcy5jaGlsZHJlbltzZWxlY3Rvcl1baV0gPSBpdGVtO1xuICAgICAgJHNwYW4udGV4dChpdGVtKTtcbiAgICAgIGNhbGxCYWNrKHNlbGVjdG9yKTtcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigkYnRuTWludXMsICRzcGFuKTtcbiAgICB9O1xuICB9XG5cbiAgZGlzYWJsZUJ1dHRvbigkYnRuLCAkc3Bhbikge1xuICAgIGlmICgkc3Bhbi50ZXh0KCkgPD0gMCkge1xuICAgICAgJGJ0bi5hZGRDbGFzcyh0aGlzLmJ1dHRvbkRpc2FibGVDbGFzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRidG4ucmVtb3ZlQ2xhc3ModGhpcy5idXR0b25EaXNhYmxlQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIGJ1dHRvbkFjdGlvbihzZWxlY3Rvcikge1xuICAgIHRoaXMuZHJvcERvd25bc2VsZWN0b3JdLmZpbmQodGhpcy5idG5SZXNldENsYXNzKS5vbignY2xpY2snLCB0aGlzLm1ha2VFdmVudFJlc2V0KHNlbGVjdG9yKSk7XG4gIH1cblxuICBtYWtlRXZlbnRSZXNldChzZWxlY3Rvcikge1xuICAgIGNvbnN0ICRjdXJyZW50VGV4dCA9IHRoaXMuZHJvcERvd25bc2VsZWN0b3JdLmZpbmQodGhpcy50ZXh0Q3VycmVudENsYXNzKTtcbiAgICBjb25zdCAkc3BhbiA9IHRoaXMuZHJvcERvd25bc2VsZWN0b3JdLmZpbmQodGhpcy5zcGFuQ2xhc3MpO1xuICAgIGNvbnN0ICRidG5NaW51cyA9IHRoaXMuZHJvcERvd25bc2VsZWN0b3JdLmZpbmQodGhpcy5idG5NaW51c0NsYXNzKTtcbiAgICByZXR1cm4gZXZlbnQgPT4ge1xuICAgICAgJGN1cnJlbnRUZXh0LnRleHQoJ9Ch0LrQvtC70YzQutC+INCz0L7RgdGC0LXQuScpO1xuICAgICAgJHNwYW4udGV4dCgwKTtcbiAgICAgICRidG5NaW51cy5hZGRDbGFzcyh0aGlzLmJ1dHRvbkRpc2FibGVDbGFzcyk7XG4gICAgICB0aGlzLmNoaWxkcmVuW3NlbGVjdG9yXS5maWxsKDApO1xuICAgICAgRHJvcERvd24uYnRuSGlkZSgkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLCAwKTtcbiAgICB9O1xuICB9XG5cbiAgZHJvcEl0ZW0oZWwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY291bnQ6ICQoZWwpLmZpbmQodGhpcy5zcGFuQ2xhc3MpLnRleHQoKSxcbiAgICAgIG5hbWU6ICQoZWwpLmNoaWxkcmVuKHRoaXMuaXRlbVNwYW5DbGFzcykudGV4dCgpXG4gICAgfTtcbiAgfVxuXG4gIHRleHRDdXJyZW50TmV3KHNlbGVjdG9yKSB7XG4gICAgbGV0IHRleHRDdXJyZW50ID0gJyc7XG4gICAgbGV0IGNvdW50RWxlbSA9IDA7XG4gICAgdGhpcy5kcm9wRG93bltzZWxlY3Rvcl0uZmluZCh0aGlzLmRyb3BJdGVtQ2xhc3MpLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGNvdW50LFxuICAgICAgICBuYW1lOiBuYW1lRWxlbVxuICAgICAgfSA9IHRoaXMuZHJvcEl0ZW0oZWwpO1xuXG4gICAgICBpZiAoY291bnQgPiAwKSB7XG4gICAgICAgIGNvdW50RWxlbSArPSAxO1xuICAgICAgICB0ZXh0Q3VycmVudCA9IGAke0Ryb3BEb3duLmdldFRleHQodGV4dEN1cnJlbnQsIGNvdW50RWxlbSl9ICR7Y291bnR9ICR7bmFtZUVsZW19YDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLmRyb3BEb3duW3NlbGVjdG9yXS5maW5kKHRoaXMudGV4dEN1cnJlbnRDbGFzcykudGV4dCh0ZXh0Q3VycmVudCk7XG4gIH1cblxuICBzdGF0aWMgZ2V0VGV4dCh0ZXh0Q3VycmVudCwgY291bnRFbGVtKSB7XG4gICAgcmV0dXJuIGAke3RleHRDdXJyZW50fSR7Y291bnRFbGVtID49IDIgPyAnLCAnIDogJyAnfWA7XG4gIH1cblxuICB0ZXh0TW9kaWZ5KHNlbGVjdG9yKSB7XG4gICAgbGV0IHRleHRDdXJyZW50ID0gJ9Ch0LrQvtC70YzQutC+INCz0L7RgdGC0LXQuSc7XG4gICAgbGV0IGFkdWx0cyA9IDA7IC8vINGB0YfQtdGC0YfQuNC6INCy0LfRgNC+0YHQu9GL0YVcblxuICAgIGxldCBjaGlsZCA9IDA7IC8vINGB0YfQtdGC0YfQuNC6INC80LvQsNC00LXQvdGG0LXQslxuXG4gICAgY29uc3QgJGJ0blJlc2V0ID0gdGhpcy5kcm9wRG93bltzZWxlY3Rvcl0uZmluZCh0aGlzLmJ0blJlc2V0Q2xhc3MpO1xuICAgIHRoaXMuZHJvcERvd25bc2VsZWN0b3JdLmZpbmQoYCR7dGhpcy5kcm9wSXRlbUNsYXNzfWApLmVhY2goKF8sIGVsKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGNvdW50LFxuICAgICAgICBuYW1lXG4gICAgICB9ID0gdGhpcy5kcm9wSXRlbShlbCk7XG5cbiAgICAgIGlmIChuYW1lID09PSAn0LzQu9Cw0LTQtdC90YbRiycpIHtcbiAgICAgICAgY2hpbGQgPSBjb3VudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkdWx0cyArPSArY291bnQ7XG4gICAgICB9XG5cbiAgICAgIHRleHRDdXJyZW50ID0gRHJvcERvd24uY291bnRBZHVsdChhZHVsdHMsIGNoaWxkKSArIERyb3BEb3duLmNvdW50Q2hpbGQoY2hpbGQpO1xuICAgIH0pO1xuICAgIHRoaXMuZHJvcERvd25bc2VsZWN0b3JdLmZpbmQodGhpcy50ZXh0Q3VycmVudENsYXNzKS50ZXh0KHRleHRDdXJyZW50KTtcbiAgICBEcm9wRG93bi5idG5IaWRlKCRidG5SZXNldCwgYWR1bHRzLCBjaGlsZCk7XG4gIH1cblxuICBzdGF0aWMgYnRuSGlkZSgkYnRuUmVzZXQsIGFkdWx0cywgY2hpbGQgPSAwKSB7XG4gICAgaWYgKGFkdWx0cyA8PSAwICYmIGNoaWxkIDw9IDApIHtcbiAgICAgICRidG5SZXNldC5jc3MoJ29wYWNpdHknLCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGJ0blJlc2V0LmNzcygnb3BhY2l0eScsIDEpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBjb3VudEFkdWx0KGNvdW50LCBjaGlsZCkge1xuICAgIGNvbnN0IHMgPSBjaGlsZCA+IDAgPyAnLCAnIDogJyAnO1xuXG4gICAgc3dpdGNoICh0cnVlKSB7XG4gICAgICBjYXNlIGNvdW50IDw9IDA6XG4gICAgICAgIHJldHVybiAnICc7XG5cbiAgICAgIGNhc2UgY291bnQgPD0gMTpcbiAgICAgICAgcmV0dXJuIGAke2NvdW50fSDQs9C+0YHRgtGMJHtzfWA7XG5cbiAgICAgIGNhc2UgY291bnQgPD0gNDpcbiAgICAgICAgcmV0dXJuIGAke2NvdW50fSDQs9C+0YHRgtGPJHtzfWA7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBgJHtjb3VudH0g0LPQvtGB0YLQtdC5JHtzfWA7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGNvdW50Q2hpbGQoY291bnQpIHtcbiAgICBzd2l0Y2ggKHRydWUpIHtcbiAgICAgIGNhc2UgY291bnQgPD0gMDpcbiAgICAgICAgcmV0dXJuICcnO1xuXG4gICAgICBjYXNlIGNvdW50IDw9IDE6XG4gICAgICAgIHJldHVybiBgJHtjb3VudH0g0LzQu9Cw0LTQtdC90LXRhmA7XG5cbiAgICAgIGNhc2UgY291bnQgPD0gNDpcbiAgICAgICAgcmV0dXJuIGAke2NvdW50fSDQvNC70LDQtNC10L3RhtCwYDtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGAke2NvdW50fSDQvNC70LDQtNC10L3RhtC10LJgO1xuICAgIH1cbiAgfVxuXG4gIGNoaWxkcmVuQ3VycmVudFZhbChjbGFzc05hbWUpIHtcbiAgICB0aGlzLmNoaWxkcmVuW2NsYXNzTmFtZV0gPSBbXTtcbiAgICAkKGAke2NsYXNzTmFtZX0gJHt0aGlzLnNwYW5DbGFzc31gKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgICAgdGhpcy5jaGlsZHJlbltjbGFzc05hbWVdW2ldID0gK2VsLnRleHRDb250ZW50O1xuICAgIH0pO1xuICB9XG5cbn0sIChfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsIFwibWFrZUNsb3NlRHJvcERvd25cIiwgW2JvdW5kTWV0aG9kXSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcIm1ha2VDbG9zZURyb3BEb3duXCIpLCBfY2xhc3MucHJvdG90eXBlKSwgX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcInRleHRDdXJyZW50TmV3XCIsIFtib3VuZE1ldGhvZF0sIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJ0ZXh0Q3VycmVudE5ld1wiKSwgX2NsYXNzLnByb3RvdHlwZSksIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJ0ZXh0TW9kaWZ5XCIsIFtib3VuZE1ldGhvZF0sIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJ0ZXh0TW9kaWZ5XCIpLCBfY2xhc3MucHJvdG90eXBlKSksIF9jbGFzcyk7XG5leHBvcnQgeyBEcm9wRG93biB9OyIsImltcG9ydCB7IERyb3BEb3duIH0gZnJvbSAnQC9jb21wb25lbnRzL2Ryb3AtZG93bi9Ecm9wRG93bic7XG4kKCgpID0+IHtcbiAgY29uc3QgZHJvcGRvd24gPSBuZXcgRHJvcERvd24oKTtcbiAgZHJvcGRvd24uaW5pdCgpO1xufSk7IiwidmFyIF9jbGFzcztcblxuZnVuY3Rpb24gX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcih0YXJnZXQsIHByb3BlcnR5LCBkZWNvcmF0b3JzLCBkZXNjcmlwdG9yLCBjb250ZXh0KSB7IHZhciBkZXNjID0ge307IE9iamVjdC5rZXlzKGRlc2NyaXB0b3IpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBkZXNjW2tleV0gPSBkZXNjcmlwdG9yW2tleV07IH0pOyBkZXNjLmVudW1lcmFibGUgPSAhIWRlc2MuZW51bWVyYWJsZTsgZGVzYy5jb25maWd1cmFibGUgPSAhIWRlc2MuY29uZmlndXJhYmxlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjIHx8IGRlc2MuaW5pdGlhbGl6ZXIpIHsgZGVzYy53cml0YWJsZSA9IHRydWU7IH0gZGVzYyA9IGRlY29yYXRvcnMuc2xpY2UoKS5yZXZlcnNlKCkucmVkdWNlKGZ1bmN0aW9uIChkZXNjLCBkZWNvcmF0b3IpIHsgcmV0dXJuIGRlY29yYXRvcih0YXJnZXQsIHByb3BlcnR5LCBkZXNjKSB8fCBkZXNjOyB9LCBkZXNjKTsgaWYgKGNvbnRleHQgJiYgZGVzYy5pbml0aWFsaXplciAhPT0gdm9pZCAwKSB7IGRlc2MudmFsdWUgPSBkZXNjLmluaXRpYWxpemVyID8gZGVzYy5pbml0aWFsaXplci5jYWxsKGNvbnRleHQpIDogdm9pZCAwOyBkZXNjLmluaXRpYWxpemVyID0gdW5kZWZpbmVkOyB9IGlmIChkZXNjLmluaXRpYWxpemVyID09PSB2b2lkIDApIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgcHJvcGVydHksIGRlc2MpOyBkZXNjID0gbnVsbDsgfSByZXR1cm4gZGVzYzsgfVxuXG5pbXBvcnQgeyBib3VuZE1ldGhvZCB9IGZyb20gJ2F1dG9iaW5kLWRlY29yYXRvcic7XG5sZXQgTWVudSA9IChfY2xhc3MgPSBjbGFzcyBNZW51IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy50b2dnbGVDbGFzcyA9ICdtZW51X19idXJnZXJfYWN0aXZlJztcbiAgICB0aGlzLm1lbnVJdGVtTGlzdENsYXNzID0gJy5qcy1tZW51X19pdGVtX3dpdGgtbGlzdCc7XG4gICAgdGhpcy5pdGVtc0NsYXNzID0gJy5qcy1tZW51X19pdGVtcyc7XG4gICAgdGhpcy5idXJnZXJDbGFzcyA9ICcuanMtbWVudV9fYnVyZ2VyJztcbiAgICB0aGlzLmJ1cmdlciA9ICQodGhpcy5idXJnZXJDbGFzcyk7XG4gICAgdGhpcy5kcm9wTGlzdENsYXNzID0gJy5qcy1tZW51X19kcm9wLWxpc3QnO1xuICAgIHRoaXMuaWNvbiA9ICc8aSBjbGFzcz1cIm1lbnVfX2ljb25cIj4gZXhwYW5kX21vcmUgPC9pPic7XG4gIH1cblxuICBpbml0KCkge1xuICAgIGNvbnN0ICRtZW51SXRlbSA9ICQodGhpcy5tZW51SXRlbUxpc3RDbGFzcyk7XG4gICAgdGhpcy5idXJnZXIuZWFjaCgoXywgZWwpID0+IHtcbiAgICAgICQoZWwpLmNsaWNrKHRoaXMudG9nZ2xlTWVudUJ1cmdlcik7XG4gICAgfSk7XG4gICAgJChkb2N1bWVudCkuY2xpY2sodGhpcy5kb2N1bWVudEV2ZW50KTtcbiAgICAkbWVudUl0ZW0uYXBwZW5kKHRoaXMuaWNvbik7XG4gICAgJG1lbnVJdGVtLmhvdmVyKHRoaXMuaGFuZGxlckluLCB0aGlzLmhhbmRsZXJPdXQpO1xuICB9XG5cbiAgZG9jdW1lbnRFdmVudChldmVudCkge1xuICAgIGlmICgkKGV2ZW50LnRhcmdldCkuY2xvc2VzdCh0aGlzLml0ZW1zQ2xhc3MpLmxlbmd0aCB8fCAkKGV2ZW50LnRhcmdldCkuY2xvc2VzdCh0aGlzLmJ1cmdlckNsYXNzKS5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAkKHRoaXMuaXRlbXNDbGFzcykucmVtb3ZlQ2xhc3ModGhpcy50b2dnbGVDbGFzcyk7XG4gIH1cblxuICBoYW5kbGVySW4oZXZlbnQpIHtcbiAgICAkKHRoaXMuZHJvcExpc3RDbGFzcywgZXZlbnQuY3VycmVudFRhcmdldCkuc3RvcCgpLnNsaWRlRG93bigyMDApO1xuICB9XG5cbiAgaGFuZGxlck91dChldmVudCkge1xuICAgICQodGhpcy5kcm9wTGlzdENsYXNzLCBldmVudC5jdXJyZW50VGFyZ2V0KS5zdG9wKCkuc2xpZGVVcCgyMDApO1xuICB9XG5cbiAgdG9nZ2xlTWVudUJ1cmdlcihldmVudCkge1xuICAgICQoZXZlbnQuY3VycmVudFRhcmdldCkuc2libGluZ3ModGhpcy5pdGVtc0NsYXNzKS50b2dnbGVDbGFzcyh0aGlzLnRvZ2dsZUNsYXNzKTtcbiAgfVxuXG59LCAoX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcImRvY3VtZW50RXZlbnRcIiwgW2JvdW5kTWV0aG9kXSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihfY2xhc3MucHJvdG90eXBlLCBcImRvY3VtZW50RXZlbnRcIiksIF9jbGFzcy5wcm90b3R5cGUpLCBfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsIFwiaGFuZGxlckluXCIsIFtib3VuZE1ldGhvZF0sIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJoYW5kbGVySW5cIiksIF9jbGFzcy5wcm90b3R5cGUpLCBfYXBwbHlEZWNvcmF0ZWREZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsIFwiaGFuZGxlck91dFwiLCBbYm91bmRNZXRob2RdLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKF9jbGFzcy5wcm90b3R5cGUsIFwiaGFuZGxlck91dFwiKSwgX2NsYXNzLnByb3RvdHlwZSksIF9hcHBseURlY29yYXRlZERlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJ0b2dnbGVNZW51QnVyZ2VyXCIsIFtib3VuZE1ldGhvZF0sIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoX2NsYXNzLnByb3RvdHlwZSwgXCJ0b2dnbGVNZW51QnVyZ2VyXCIpLCBfY2xhc3MucHJvdG90eXBlKSksIF9jbGFzcyk7XG5leHBvcnQgeyBNZW51IH07IiwiaW1wb3J0IHsgTWVudSB9IGZyb20gJy4vTWVudSc7XG4kKCgpID0+IHtcbiAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XG4gIG1lbnUuaW5pdCgpO1xufSk7IiwiaW1wb3J0ICdqcXVlcnktbWFzay1wbHVnaW4nO1xuXG5jbGFzcyBGaWVsZCB7XG4gIHN0YXRpYyBpbml0KCkge1xuICAgICQoJy5qcy1maWVsZF9faW5wdXRbbmFtZSo9ZW1haWxdJykubWFzaygnQScsIHtcbiAgICAgIHRyYW5zbGF0aW9uOiB7XG4gICAgICAgIEE6IHtcbiAgICAgICAgICBwYXR0ZXJuOiAvW1xcd0BcXC0uK10vLFxuICAgICAgICAgIHJlY3Vyc2l2ZTogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgJCgnLmpzLWZpZWxkX19pbnB1dFtuYW1lKj1uYW1lXScpLm1hc2soJ0EnLCB7XG4gICAgICB0cmFuc2xhdGlvbjoge1xuICAgICAgICBBOiB7XG4gICAgICAgICAgcGF0dGVybjogL1tcXHcrXS8sXG4gICAgICAgICAgcmVjdXJzaXZlOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICAkKCcuanMtZmllbGRfdGV4dFtuYW1lKj1kYXRlXScpLm1hc2soJzAwLjAwLjAwMDAnKTtcbiAgfVxuXG59XG5cbmV4cG9ydCB7IEZpZWxkIH07IiwiaW1wb3J0IHsgRmllbGQgfSBmcm9tICdAL2NvbXBvbmVudHMvZmllbGQvRmllbGQnO1xuJCgoKSA9PiB7XG4gIEZpZWxkLmluaXQoKTtcbn0pOyIsImltcG9ydCAnQC9zdHlsZXMvbWFpbi5zY3NzJztcbmltcG9ydCAnanF1ZXJ5LXVpJztcbmltcG9ydCAnQC9jb21wb25lbnRzL2RhdGUtcGlja2VyJztcbmltcG9ydCAnQC9jb21wb25lbnRzL2Ryb3AtZG93bic7XG5pbXBvcnQgJ0AvY29tcG9uZW50cy9oZWFkZXInO1xuaW1wb3J0ICdAL2NvbXBvbmVudHMvZm9vdGVyJztcbmltcG9ydCAnLi9oZWFkZXItZm9vdGVyLnNjc3MnOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM1SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDclFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///157\n")}},__webpack_module_cache__={},deferred;function __webpack_require__(e){var c=__webpack_module_cache__[e];if(void 0!==c)return c.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.m=__webpack_modules__,deferred=[],__webpack_require__.O=(e,c,t,n)=>{if(!c){var l=1/0;for(g=0;g<deferred.length;g++){for(var[c,t,n]=deferred[g],s=!0,d=0;d<c.length;d++)(!1&n||l>=n)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](c[d])))?c.splice(d--,1):(s=!1,n<l&&(l=n));s&&(deferred.splice(g--,1),e=t())}return e}n=n||0;for(var g=deferred.length;g>0&&deferred[g-1][2]>n;g--)deferred[g]=deferred[g-1];deferred[g]=[c,t,n]},__webpack_require__.d=(e,c)=>{for(var t in c)__webpack_require__.o(c,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:c[t]})},__webpack_require__.o=(e,c)=>Object.prototype.hasOwnProperty.call(e,c),(()=>{var e={553:0};__webpack_require__.O.j=c=>0===e[c];var c=(c,t)=>{var n,l,[s,d,g]=t,I=0;for(n in d)__webpack_require__.o(d,n)&&(__webpack_require__.m[n]=d[n]);if(g)var i=g(__webpack_require__);for(c&&c(t);I<s.length;I++)l=s[I],__webpack_require__.o(e,l)&&e[l]&&e[l][0](),e[s[I]]=0;return __webpack_require__.O(i)},t=self.webpackChunk=self.webpackChunk||[];t.forEach(c.bind(null,0)),t.push=c.bind(null,t.push.bind(t))})();var __webpack_exports__=__webpack_require__.O(void 0,[251,248],(()=>__webpack_require__(157)));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();